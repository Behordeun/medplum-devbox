{"version":3,"file":"eventtarget.mjs","sources":["../../src/eventtarget.ts"],"sourcesContent":["/*\n * Based on: https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n */\n\ninterface Event {\n  readonly type: string;\n  readonly defaultPrevented?: boolean;\n}\n\ntype EventListener = (e: Event) => void;\n\nexport class EventTarget {\n  readonly #listeners: Record<string, EventListener[]>;\n\n  constructor() {\n    this.#listeners = {};\n  }\n\n  addEventListener(type: string, callback: EventListener): void {\n    if (!this.#listeners[type]) {\n      this.#listeners[type] = [];\n    }\n    this.#listeners[type].push(callback);\n  }\n\n  removeEventListeneer(type: string, callback: EventListener): void {\n    const array = this.#listeners[type];\n    if (!array) {\n      return;\n    }\n    for (let i = 0; i < array.length; i++) {\n      if (array[i] === callback) {\n        array.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  dispatchEvent(event: Event): boolean {\n    const array = this.#listeners[event.type];\n    if (array) {\n      array.forEach((listener) => listener.call(this, event));\n    }\n    return !event.defaultPrevented;\n  }\n}\n"],"names":[],"mappings":";;AAAA;;AAEG;;MASU,WAAW,CAAA;AAGtB,IAAA,WAAA,GAAA;QAFA,sBAAqD,CAAA,GAAA,CAAA,IAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAGnD,QAAA,sBAAA,CAAA,IAAI,EAAA,sBAAA,EAAc,EAAE,EAAA,GAAA,CAAA,CAAC;KACtB;IAED,gBAAgB,CAAC,IAAY,EAAE,QAAuB,EAAA;AACpD,QAAA,IAAI,CAAC,sBAAA,CAAA,IAAI,8BAAW,CAAC,IAAI,CAAC,EAAE;AAC1B,YAAA,sBAAA,CAAA,IAAI,EAAW,sBAAA,EAAA,GAAA,CAAA,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;AAC5B,SAAA;QACD,sBAAA,CAAA,IAAI,EAAW,sBAAA,EAAA,GAAA,CAAA,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACtC;IAED,oBAAoB,CAAC,IAAY,EAAE,QAAuB,EAAA;QACxD,MAAM,KAAK,GAAG,sBAAA,CAAA,IAAI,8BAAW,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,KAAK,EAAE;YACV,OAAO;AACR,SAAA;AACD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,YAAA,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;AACzB,gBAAA,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACnB,OAAO;AACR,aAAA;AACF,SAAA;KACF;AAED,IAAA,aAAa,CAAC,KAAY,EAAA;QACxB,MAAM,KAAK,GAAG,sBAAA,CAAA,IAAI,EAAA,sBAAA,EAAA,GAAA,CAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC1C,QAAA,IAAI,KAAK,EAAE;AACT,YAAA,KAAK,CAAC,OAAO,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AACzD,SAAA;AACD,QAAA,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC;KAChC;AACF,CAAA;;;;;"}