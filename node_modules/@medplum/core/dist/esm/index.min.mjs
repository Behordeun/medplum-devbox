function e(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function t(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n}var n,i,o,r;class a{constructor(e=10){n.add(this),i.set(this,void 0),o.set(this,void 0),t(this,i,e,"f"),t(this,o,new Map,"f")}clear(){e(this,o,"f").clear()}get(t){const n=e(this,o,"f").get(t);return n&&(e(this,o,"f").delete(t),e(this,o,"f").set(t,n)),n}set(t,a){e(this,o,"f").has(t)?e(this,o,"f").delete(t):e(this,o,"f").size>=e(this,i,"f")&&e(this,o,"f").delete(e(this,n,"m",r).call(this)),e(this,o,"f").set(t,a)}delete(t){e(this,o,"f").delete(t)}keys(){return e(this,o,"f").keys()}}function s(e,t){const n=[];if(e.line&&n.push(...e.line),e.city||e.state||e.postalCode){const t=[];e.city&&t.push(e.city),e.state&&t.push(e.state),e.postalCode&&t.push(e.postalCode),n.push(t.join(", "))}return e.use&&(t?.all||t?.use)&&n.push("["+e.use+"]"),n.join(t?.lineSeparator||", ").trim()}function c(e,t){const n=[];return e.prefix&&!1!==t?.prefix&&n.push(...e.prefix),e.given&&n.push(...e.given),e.family&&n.push(e.family),e.suffix&&!1!==t?.suffix&&n.push(...e.suffix),e.use&&(t?.all||t?.use)&&n.push("["+e.use+"]"),n.join(" ").trim()}function d(e){const t=[];return e.given&&t.push(...e.given),t.join(" ").trim()}function l(e){return e.family||""}function u(e){return e instanceof Date&&!isNaN(e.getTime())}function m(e,t,n){if(!e)return"";const i=new Date(e);return u(i)?(i.setUTCHours(0,0,0,0),i.toLocaleDateString(t,{timeZone:"UTC",...n})):""}function p(e,t,n){if(!e)return"";const i=new Date("2000-01-01T"+e+"Z");return u(i)?i.toLocaleTimeString(t,n):""}function h(e,t,n){if(!e)return"";const i=new Date(e);return u(i)?i.toLocaleString(t,n):""}function f(e,t,n){return e&&(e.start||e.end)?h(e.start,t,n)+" - "+h(e.end,t,n):""}i=new WeakMap,o=new WeakMap,n=new WeakSet,r=function(){return e(this,o,"f").keys().next().value};const y={s:"every second",min:"every minute",h:"hourly",d:"daily",wk:"weekly",mo:"monthly",a:"annually"},g={s:"second",min:"minute",h:"hour",d:"day",wk:"week",mo:"month",a:"year"},x={s:"seconds",min:"minutes",h:"hours",d:"days",wk:"weeks",mo:"months",a:"years"};function v(e){if(!e)return"";const t=[];if(e.repeat?.periodUnit){const n=e.repeat.frequency||1,i=e.repeat.period||1,o=e.repeat.periodUnit;1===n&&1===i?t.push(y[o]):(1===n?t.push("once"):t.push(n+" times"),1===i?t.push("per "+g[o]):t.push("per "+i+" "+x[o])),e.repeat.dayOfWeek&&t.push("on "+e.repeat.dayOfWeek.map(Z).join(", ")),e.repeat.timeOfDay&&t.push("at "+e.repeat.timeOfDay.map((e=>p(e))).join(", "))}return e.event&&t.push(e.event.map((e=>h(e))).join(", ")),Z(t.join(" ").trim())}function w(e,t,n=!1){if(n&&void 0===t)throw new Error("Precision must be specified for exclusive ranges");const i=e?.low&&{...e.low},o=e?.high&&{...e.high};return!e||void 0===i?.value&&void 0===o?.value?"":void 0!==e.low?.value&&void 0===e.high?.value?n&&void 0!==t?(e.low.value=function(e,t,n=1){return(C(e,t)-n)*Math.pow(10,-t)}(e.low.value,t),`> ${S(e.low,t)}`):`>= ${S(e.low,t)}`:void 0===e.low?.value&&void 0!==e.high?.value?n&&void 0!==t?(e.high.value=function(e,t,n=1){return(C(e,t)+n)*Math.pow(10,-t)}(e.high.value,t),`< ${S(e.high,t)}`):`<= ${S(e.high,t)}`:(i?.unit===o?.unit&&delete i?.unit,`${S(i,t)} - ${S(o,t)}`)}function S(e,t){if(!e)return"";const n=[];return e.comparator&&(n.push(e.comparator),n.push(" ")),void 0!==e.value&&(void 0!==t?n.push(e.value.toFixed(t)):n.push(e.value)),e.unit&&("%"!==e.unit&&" "!==n[n.length-1]&&n.push(" "),n.push(e.unit)),n.join("").trim()}function E(e){return void 0===e?.value?"":e.value.toLocaleString(void 0,{style:"currency",currency:e.currency||"USD",currencyDisplay:"narrowSymbol"})}function T(e){return e?e.text?e.text:e.coding?e.coding.map((e=>b(e))).join(", "):"":""}function b(e){return e?.display||e?.code||""}function D(e){return e?"component"in e?e.component.map((e=>D(e))).join(" / "):e?.valueQuantity?S(e.valueQuantity):e.valueCodeableConcept?T(e.valueCodeableConcept):e.valueString?e.valueString:"":""}function C(e,t){return void 0===t?e:Math.round(e*Math.pow(10,t))}function P(e){const t=A(e),n=M(e);return n===t?{reference:t}:{reference:t,display:n}}function A(e){return e.resourceType+"/"+e.id}function R(e){return e?.reference?.split("/")[1]}function k(e){return"Patient"===e.resourceType||"Practitioner"===e.resourceType||"RelatedPerson"===e.resourceType}function M(e){if(k(e)){const t=function(e){const t=e.name;if(t&&t.length>0)return c(t[0]);return}(e);if(t)return t}if("Device"===e.resourceType){const t=function(e){const t=e.deviceName;if(t&&t.length>0)return t[0].name;return}(e);if(t)return t}return"Observation"===e.resourceType&&"code"in e&&e.code?.text?e.code.text:"User"===e.resourceType&&e.email?e.email:"name"in e&&e.name&&"string"==typeof e.name?e.name:A(e)}function I(e){if(!("photo"in e))return;const t=e.photo;if(t){if(!Array.isArray(t))return O(t);for(const e of t){const t=O(e);if(t)return t}}}function O(e){if(e.url&&e.contentType&&e.contentType.startsWith("image/"))return e.url}function U(e){return e?new Date(e):void 0}function L(e,t){const n=new Date(e);n.setUTCHours(0,0,0,0);const i=t?new Date(t):new Date;i.setUTCHours(0,0,0,0);const o=n.getUTCFullYear(),r=n.getUTCMonth(),a=n.getUTCDate(),s=i.getUTCFullYear(),c=i.getUTCMonth(),d=i.getUTCDate();let l=s-o;(c<r||c===r&&d<a)&&l--;let u=12*s+c-(12*o+r);d<a&&u--;return{years:l,months:u,days:Math.floor((i.getTime()-n.getTime())/864e5)}}function N(e,t){const{years:n,months:i,days:o}=L(e,t);return n>=2?n.toString().padStart(3,"0")+"Y":i>=1?i.toString().padStart(3,"0")+"M":o.toString().padStart(3,"0")+"D"}function _(e){const t={};return j(e.item,t),t}function j(e,t){if(e)for(const n of e)n.linkId&&n.answer&&n.answer.length>0&&(t[n.linkId]=n.answer[0]),j(n.item,t)}function Q(e,t){const n=e.identifier;if(!n)return;const i=Array.isArray(n)?n:[n];for(const e of i)if(e.system===t)return e.value}function W(e,...t){let n=e;for(let e=0;e<t.length&&n;e++)n=n?.extension?.find((n=>n.url===t[e]));return n?.valueString}function B(e,t){return JSON.stringify(e,$,t?2:void 0)}function $(e,t){return!function(e){return!!e.match(/\d+$/)}(e)&&q(t)?void 0:t}function q(e){if(null==e)return!0;const t=typeof e;return"string"===t&&""===e||"object"===t&&0===Object.keys(e).length}function F(e,t,n){return e===t||(!(!q(e)||!q(t))||!q(e)&&!q(t)&&(Array.isArray(e)&&Array.isArray(t)?function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!F(e[n],t[n]))return!1;return!0}(e,t):!Array.isArray(e)&&!Array.isArray(t)&&(G(e)&&G(t)?function(e,t,n){const i=new Set;Object.keys(e).forEach((e=>i.add(e))),Object.keys(t).forEach((e=>i.add(e))),"meta"===n&&(i.delete("versionId"),i.delete("lastUpdated"),i.delete("author"));for(const n of i){if(!F(e[n],t[n],n))return!1}return!0}(e,t,n):(G(e)||G(t),!1))))}function H(e){return JSON.parse(JSON.stringify(e))}function z(e){return!!e.match(/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/i)}function G(e){return null!==e&&"object"==typeof e}function V(e){return e.every((e=>"string"==typeof e))}const X=[];for(let e=0;e<256;e++)X.push(e.toString(16).padStart(2,"0"));function Y(e){const t=new Uint8Array(e),n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=X[t[e]];return n.join("")}function J(e){const t=new Uint8Array(e),n=[];for(let e=0;e<t.length;e++)n[e]=String.fromCharCode(t[e]);return window.btoa(n.join(""))}function Z(e){return e.charAt(0).toUpperCase()+e.substring(1)}function K(e){return e===e.toLowerCase()&&e!==e.toUpperCase()}function ee(e,t){return e?.coding?.find((e=>e.system===t))?.code}function te(e,t,n){e.coding||(e.coding=[]);const i=e.coding?.find((e=>e.system===t));i?i.code=n:e.coding?.push({system:t,code:n})}function ne(e,t,n,i){return e.qualifiedInterval?.find((o=>oe(o,t)&&function(e,t,n){return!!e.range&&re(t,e.range,n)}(o,n,e.quantitativeDetails?.decimalPrecision)&&(void 0===i||o.category===i)))}function ie(e,t,n){return e.qualifiedInterval?.find((e=>oe(e,t)&&n.includes(e.condition)))}function oe(e,t){return function(e,t){return!e.gender||e.gender===t.gender}(e,t)&&function(e,t){return!e.age||re(L(t.birthDate).years,e.age)}(e,t)}function re(e,t,n){return(void 0===t.low?.value||ue(e,t.low.value,n))&&(void 0===t.high?.value||le(e,t.high.value,n))}function ae(e,t){return parseFloat(e.toFixed(t))}function se(e,t,n){return me(e,n)===me(t,n)}function ce(e,t,n){return me(e,n)<me(t,n)}function de(e,t,n){return me(e,n)>me(t,n)}function le(e,t,n){return me(e,n)<=me(t,n)}function ue(e,t,n){return me(e,n)>=me(t,n)}function me(e,t){return void 0===t?e:Math.round(e*Math.pow(10,t))}function pe(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Y(e.buffer)}var he,fe,ye,ge,xe,ve,we,Se;class Ee{constructor(){he.set(this,void 0),t(this,he,{},"f")}addEventListener(t,n){e(this,he,"f")[t]||(e(this,he,"f")[t]=[]),e(this,he,"f")[t].push(n)}removeEventListeneer(t,n){const i=e(this,he,"f")[t];if(i)for(let e=0;e<i.length;e++)if(i[e]===n)return void i.splice(e,1)}dispatchEvent(t){const n=e(this,he,"f")[t.type];return n&&n.forEach((e=>e.call(this,t))),!t.defaultPrevented}}function Te(e){const t=function(e){if("undefined"!=typeof window)return window.atob(e);if("undefined"!=typeof Buffer)return Buffer.from(e,"base64").toString("binary");throw new Error("Unable to decode base64")}(e.replace(/-/g,"+").replace(/_/g,"/")),n=Array.from(t).reduce(((e,t)=>`${e}%${("00"+t.charCodeAt(0).toString(16)).slice(-2)}`),""),i=decodeURIComponent(n);return JSON.parse(i)}function be(e){const[t,n,i]=e.split(".");return Te(n)}he=new WeakMap;class De{constructor(e){this[ve]="ReadablePromise",fe.set(this,void 0),ye.set(this,"pending"),ge.set(this,void 0),xe.set(this,void 0),t(this,fe,e.then((e=>(t(this,ye,"success","f"),t(this,ge,e,"f"),e)),(e=>{throw t(this,ye,"error","f"),t(this,xe,e,"f"),e})),"f")}isPending(){return"pending"===e(this,ye,"f")}isOk(){return"success"===e(this,ye,"f")}read(){switch(e(this,ye,"f")){case"pending":throw e(this,fe,"f");case"error":throw e(this,xe,"f");default:return e(this,ge,"f")}}then(t,n){return e(this,fe,"f").then(t,n)}catch(t){return e(this,fe,"f").catch(t)}finally(t){return e(this,fe,"f").finally(t)}}fe=new WeakMap,ye=new WeakMap,ge=new WeakMap,xe=new WeakMap,ve=Symbol.toStringTag;class Ce{constructor(){we.set(this,void 0),t(this,we,"undefined"!=typeof localStorage?localStorage:new Pe,"f")}clear(){e(this,we,"f").clear()}getString(t){return e(this,we,"f").getItem(t)||void 0}setString(t,n){n?e(this,we,"f").setItem(t,n):e(this,we,"f").removeItem(t)}getObject(e){const t=this.getString(e);return t?JSON.parse(t):void 0}setObject(e,t){this.setString(e,t?B(t):void 0)}}we=new WeakMap;class Pe{constructor(){Se.set(this,void 0),t(this,Se,new Map,"f")}get length(){return e(this,Se,"f").size}clear(){e(this,Se,"f").clear()}getItem(t){return e(this,Se,"f").get(t)??null}setItem(t,n){n?e(this,Se,"f").set(t,n):e(this,Se,"f").delete(t)}removeItem(t){e(this,Se,"f").delete(t)}key(t){return Array.from(e(this,Se,"f").keys())[t]}}Se=new WeakMap;var Ae,Re={types:{Element:{display:"Element",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]}}},BackboneElement:{display:"BackboneElement",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]}}},Address:{display:"Address",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},use:{min:0,max:"1",type:[{code:"code"}]},type:{min:0,max:"1",type:[{code:"code"}]},text:{min:0,max:"1",type:[{code:"string"}]},line:{min:0,max:"*",type:[{code:"string"}]},city:{min:0,max:"1",type:[{code:"string"}]},district:{min:0,max:"1",type:[{code:"string"}]},state:{min:0,max:"1",type:[{code:"string"}]},postalCode:{min:0,max:"1",type:[{code:"string"}]},country:{min:0,max:"1",type:[{code:"string"}]},period:{min:0,max:"1",type:[{code:"Period"}]}}},Age:{display:"Age",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},value:{min:0,max:"1",type:[{code:"decimal"}]},comparator:{min:0,max:"1",type:[{code:"code"}]},unit:{min:0,max:"1",type:[{code:"string"}]},system:{min:0,max:"1",type:[{code:"uri"}]},code:{min:0,max:"1",type:[{code:"code"}]}}},Annotation:{display:"Annotation",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},"author[x]":{min:0,max:"1",type:[{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Practitioner","http://hl7.org/fhir/StructureDefinition/Patient","http://hl7.org/fhir/StructureDefinition/RelatedPerson","http://hl7.org/fhir/StructureDefinition/Organization"]},{code:"string"}]},time:{min:0,max:"1",type:[{code:"dateTime"}]},text:{min:1,max:"1",type:[{code:"markdown"}]}}},Attachment:{display:"Attachment",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},contentType:{min:0,max:"1",type:[{code:"code"}]},language:{min:0,max:"1",type:[{code:"code"}]},data:{min:0,max:"1",type:[{code:"base64Binary"}]},url:{min:0,max:"1",type:[{code:"url"}]},size:{min:0,max:"1",type:[{code:"unsignedInt"}]},hash:{min:0,max:"1",type:[{code:"base64Binary"}]},title:{min:0,max:"1",type:[{code:"string"}]},creation:{min:0,max:"1",type:[{code:"dateTime"}]}}},CodeableConcept:{display:"CodeableConcept",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},coding:{min:0,max:"*",type:[{code:"Coding"}]},text:{min:0,max:"1",type:[{code:"string"}]}}},Coding:{display:"Coding",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},system:{min:0,max:"1",type:[{code:"uri"}]},version:{min:0,max:"1",type:[{code:"string"}]},code:{min:0,max:"1",type:[{code:"code"}]},display:{min:0,max:"1",type:[{code:"string"}]},userSelected:{min:0,max:"1",type:[{code:"boolean"}]}}},ContactDetail:{display:"ContactDetail",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},name:{min:0,max:"1",type:[{code:"string"}]},telecom:{min:0,max:"*",type:[{code:"ContactPoint"}]}}},ContactPoint:{display:"ContactPoint",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},system:{min:0,max:"1",type:[{code:"code"}]},value:{min:0,max:"1",type:[{code:"string"}]},use:{min:0,max:"1",type:[{code:"code"}]},rank:{min:0,max:"1",type:[{code:"positiveInt"}]},period:{min:0,max:"1",type:[{code:"Period"}]}}},Contributor:{display:"Contributor",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},type:{min:1,max:"1",type:[{code:"code"}]},name:{min:1,max:"1",type:[{code:"string"}]},contact:{min:0,max:"*",type:[{code:"ContactDetail"}]}}},Count:{display:"Count",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},value:{min:0,max:"1",type:[{code:"decimal"}]},comparator:{min:0,max:"1",type:[{code:"code"}]},unit:{min:0,max:"1",type:[{code:"string"}]},system:{min:0,max:"1",type:[{code:"uri"}]},code:{min:0,max:"1",type:[{code:"code"}]}}},DataRequirement:{display:"DataRequirement",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},type:{min:1,max:"1",type:[{code:"code"}]},profile:{min:0,max:"*",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition"]}]},"subject[x]":{min:0,max:"1",type:[{code:"CodeableConcept"},{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Group"]}]},mustSupport:{min:0,max:"*",type:[{code:"string"}]},codeFilter:{min:0,max:"*",type:[{code:"Element"}]},dateFilter:{min:0,max:"*",type:[{code:"Element"}]},limit:{min:0,max:"1",type:[{code:"positiveInt"}]},sort:{min:0,max:"*",type:[{code:"Element"}]}}},DataRequirementCodeFilter:{display:"DataRequirementCodeFilter",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},path:{min:0,max:"1",type:[{code:"string"}]},searchParam:{min:0,max:"1",type:[{code:"string"}]},valueSet:{min:0,max:"1",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/ValueSet"]}]},code:{min:0,max:"*",type:[{code:"Coding"}]}},parentType:"DataRequirement"},DataRequirementDateFilter:{display:"DataRequirementDateFilter",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},path:{min:0,max:"1",type:[{code:"string"}]},searchParam:{min:0,max:"1",type:[{code:"string"}]},"value[x]":{min:0,max:"1",type:[{code:"dateTime"},{code:"Period"},{code:"Duration"}]}},parentType:"DataRequirement"},DataRequirementSort:{display:"DataRequirementSort",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},path:{min:1,max:"1",type:[{code:"string"}]},direction:{min:1,max:"1",type:[{code:"code"}]}},parentType:"DataRequirement"},Distance:{display:"Distance",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},value:{min:0,max:"1",type:[{code:"decimal"}]},comparator:{min:0,max:"1",type:[{code:"code"}]},unit:{min:0,max:"1",type:[{code:"string"}]},system:{min:0,max:"1",type:[{code:"uri"}]},code:{min:0,max:"1",type:[{code:"code"}]}}},Dosage:{display:"Dosage",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]},sequence:{min:0,max:"1",type:[{code:"integer"}]},text:{min:0,max:"1",type:[{code:"string"}]},additionalInstruction:{min:0,max:"*",type:[{code:"CodeableConcept"}]},patientInstruction:{min:0,max:"1",type:[{code:"string"}]},timing:{min:0,max:"1",type:[{code:"Timing"}]},"asNeeded[x]":{min:0,max:"1",type:[{code:"boolean"},{code:"CodeableConcept"}]},site:{min:0,max:"1",type:[{code:"CodeableConcept"}]},route:{min:0,max:"1",type:[{code:"CodeableConcept"}]},method:{min:0,max:"1",type:[{code:"CodeableConcept"}]},doseAndRate:{min:0,max:"*",type:[{code:"Element"}]},maxDosePerPeriod:{min:0,max:"1",type:[{code:"Ratio"}]},maxDosePerAdministration:{min:0,max:"1",type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]},maxDosePerLifetime:{min:0,max:"1",type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]}}},DosageDoseAndRate:{display:"DosageDoseAndRate",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},type:{min:0,max:"1",type:[{code:"CodeableConcept"}]},"dose[x]":{min:0,max:"1",type:[{code:"Range"},{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]},"rate[x]":{min:0,max:"1",type:[{code:"Ratio"},{code:"Range"},{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]}},parentType:"Dosage"},Duration:{display:"Duration",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},value:{min:0,max:"1",type:[{code:"decimal"}]},comparator:{min:0,max:"1",type:[{code:"code"}]},unit:{min:0,max:"1",type:[{code:"string"}]},system:{min:0,max:"1",type:[{code:"uri"}]},code:{min:0,max:"1",type:[{code:"code"}]}}},ElementDefinition:{display:"ElementDefinition",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]},path:{min:1,max:"1",type:[{code:"string"}]},representation:{min:0,max:"*",type:[{code:"code"}]},sliceName:{min:0,max:"1",type:[{code:"string"}]},sliceIsConstraining:{min:0,max:"1",type:[{code:"boolean"}]},label:{min:0,max:"1",type:[{code:"string"}]},code:{min:0,max:"*",type:[{code:"Coding"}]},slicing:{min:0,max:"1",type:[{code:"Element"}]},short:{min:0,max:"1",type:[{code:"string"}]},definition:{min:0,max:"1",type:[{code:"markdown"}]},comment:{min:0,max:"1",type:[{code:"markdown"}]},requirements:{min:0,max:"1",type:[{code:"markdown"}]},alias:{min:0,max:"*",type:[{code:"string"}]},min:{min:0,max:"1",type:[{code:"unsignedInt"}]},max:{min:0,max:"1",type:[{code:"string"}]},base:{min:0,max:"1",type:[{code:"Element"}]},contentReference:{min:0,max:"1",type:[{code:"uri"}]},type:{min:0,max:"*",type:[{code:"Element"}]},"defaultValue[x]":{min:0,max:"1",type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]},meaningWhenMissing:{min:0,max:"1",type:[{code:"markdown"}]},orderMeaning:{min:0,max:"1",type:[{code:"string"}]},"fixed[x]":{min:0,max:"1",type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]},"pattern[x]":{min:0,max:"1",type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]},example:{min:0,max:"*",type:[{code:"Element"}]},"minValue[x]":{min:0,max:"1",type:[{code:"date"},{code:"dateTime"},{code:"instant"},{code:"time"},{code:"decimal"},{code:"integer"},{code:"positiveInt"},{code:"unsignedInt"},{code:"Quantity"}]},"maxValue[x]":{min:0,max:"1",type:[{code:"date"},{code:"dateTime"},{code:"instant"},{code:"time"},{code:"decimal"},{code:"integer"},{code:"positiveInt"},{code:"unsignedInt"},{code:"Quantity"}]},maxLength:{min:0,max:"1",type:[{code:"integer"}]},condition:{min:0,max:"*",type:[{code:"id"}]},constraint:{min:0,max:"*",type:[{code:"Element"}]},mustSupport:{min:0,max:"1",type:[{code:"boolean"}]},isModifier:{min:0,max:"1",type:[{code:"boolean"}]},isModifierReason:{min:0,max:"1",type:[{code:"string"}]},isSummary:{min:0,max:"1",type:[{code:"boolean"}]},binding:{min:0,max:"1",type:[{code:"Element"}]},mapping:{min:0,max:"*",type:[{code:"Element"}]}}},ElementDefinitionSlicing:{display:"ElementDefinitionSlicing",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},discriminator:{min:0,max:"*",type:[{code:"Element"}]},description:{min:0,max:"1",type:[{code:"string"}]},ordered:{min:0,max:"1",type:[{code:"boolean"}]},rules:{min:1,max:"1",type:[{code:"code"}]}},parentType:"ElementDefinition"},ElementDefinitionSlicingDiscriminator:{display:"ElementDefinitionSlicingDiscriminator",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},type:{min:1,max:"1",type:[{code:"code"}]},path:{min:1,max:"1",type:[{code:"string"}]}},parentType:"ElementDefinitionSlicing"},ElementDefinitionBase:{display:"ElementDefinitionBase",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},path:{min:1,max:"1",type:[{code:"string"}]},min:{min:1,max:"1",type:[{code:"unsignedInt"}]},max:{min:1,max:"1",type:[{code:"string"}]}},parentType:"ElementDefinition"},ElementDefinitionType:{display:"ElementDefinitionType",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},code:{min:1,max:"1",type:[{code:"uri"}]},profile:{min:0,max:"*",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition","http://hl7.org/fhir/StructureDefinition/ImplementationGuide"]}]},targetProfile:{min:0,max:"*",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition","http://hl7.org/fhir/StructureDefinition/ImplementationGuide"]}]},aggregation:{min:0,max:"*",type:[{code:"code"}]},versioning:{min:0,max:"1",type:[{code:"code"}]}},parentType:"ElementDefinition"},ElementDefinitionExample:{display:"ElementDefinitionExample",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},label:{min:1,max:"1",type:[{code:"string"}]},"value[x]":{min:1,max:"1",type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]}},parentType:"ElementDefinition"},ElementDefinitionConstraint:{display:"ElementDefinitionConstraint",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},key:{min:1,max:"1",type:[{code:"id"}]},requirements:{min:0,max:"1",type:[{code:"string"}]},severity:{min:1,max:"1",type:[{code:"code"}]},human:{min:1,max:"1",type:[{code:"string"}]},expression:{min:0,max:"1",type:[{code:"string"}]},xpath:{min:0,max:"1",type:[{code:"string"}]},source:{min:0,max:"1",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition"]}]}},parentType:"ElementDefinition"},ElementDefinitionBinding:{display:"ElementDefinitionBinding",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},strength:{min:1,max:"1",type:[{code:"code"}]},description:{min:0,max:"1",type:[{code:"string"}]},valueSet:{min:0,max:"1",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/ValueSet"]}]}},parentType:"ElementDefinition"},ElementDefinitionMapping:{display:"ElementDefinitionMapping",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},identity:{min:1,max:"1",type:[{code:"id"}]},language:{min:0,max:"1",type:[{code:"code"}]},map:{min:1,max:"1",type:[{code:"string"}]},comment:{min:0,max:"1",type:[{code:"string"}]}},parentType:"ElementDefinition"},Expression:{display:"Expression",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},description:{min:0,max:"1",type:[{code:"string"}]},name:{min:0,max:"1",type:[{code:"id"}]},language:{min:1,max:"1",type:[{code:"code"}]},expression:{min:0,max:"1",type:[{code:"string"}]},reference:{min:0,max:"1",type:[{code:"uri"}]}}},Extension:{display:"Extension",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},url:{min:1,max:"1",type:[{code:"string"}]},"value[x]":{min:0,max:"1",type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]}}},HumanName:{display:"HumanName",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},use:{min:0,max:"1",type:[{code:"code"}]},text:{min:0,max:"1",type:[{code:"string"}]},family:{min:0,max:"1",type:[{code:"string"}]},given:{min:0,max:"*",type:[{code:"string"}]},prefix:{min:0,max:"*",type:[{code:"string"}]},suffix:{min:0,max:"*",type:[{code:"string"}]},period:{min:0,max:"1",type:[{code:"Period"}]}}},Identifier:{display:"Identifier",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},use:{min:0,max:"1",type:[{code:"code"}]},type:{min:0,max:"1",type:[{code:"CodeableConcept"}]},system:{min:0,max:"1",type:[{code:"uri"}]},value:{min:0,max:"1",type:[{code:"string"}]},period:{min:0,max:"1",type:[{code:"Period"}]},assigner:{min:0,max:"1",type:[{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Organization"]}]}}},MarketingStatus:{display:"MarketingStatus",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]},country:{min:1,max:"1",type:[{code:"CodeableConcept"}]},jurisdiction:{min:0,max:"1",type:[{code:"CodeableConcept"}]},status:{min:1,max:"1",type:[{code:"CodeableConcept"}]},dateRange:{min:1,max:"1",type:[{code:"Period"}]},restoreDate:{min:0,max:"1",type:[{code:"dateTime"}]}}},Meta:{display:"Meta",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},versionId:{min:0,max:"1",type:[{code:"id"}]},lastUpdated:{min:0,max:"1",type:[{code:"instant"}]},source:{min:0,max:"1",type:[{code:"uri"}]},profile:{min:0,max:"*",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition"]}]},security:{min:0,max:"*",type:[{code:"Coding"}]},tag:{min:0,max:"*",type:[{code:"Coding"}]},project:{min:0,max:"1",type:[{code:"uri"}]},author:{min:0,max:"1",type:[{code:"Reference"}]},account:{min:0,max:"1",type:[{code:"Reference"}]}}},Money:{display:"Money",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},value:{min:0,max:"1",type:[{code:"decimal"}]},currency:{min:0,max:"1",type:[{code:"code"}]}}},Narrative:{display:"Narrative",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},status:{min:1,max:"1",type:[{code:"code"}]},div:{min:1,max:"1",type:[{code:"xhtml"}]}}},ParameterDefinition:{display:"ParameterDefinition",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},name:{min:0,max:"1",type:[{code:"code"}]},use:{min:1,max:"1",type:[{code:"code"}]},min:{min:0,max:"1",type:[{code:"integer"}]},max:{min:0,max:"1",type:[{code:"string"}]},documentation:{min:0,max:"1",type:[{code:"string"}]},type:{min:1,max:"1",type:[{code:"code"}]},profile:{min:0,max:"1",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition"]}]}}},Period:{display:"Period",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},start:{min:0,max:"1",type:[{code:"dateTime"}]},end:{min:0,max:"1",type:[{code:"dateTime"}]}}},Population:{display:"Population",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]},"age[x]":{min:0,max:"1",type:[{code:"Range"},{code:"CodeableConcept"}]},gender:{min:0,max:"1",type:[{code:"CodeableConcept"}]},race:{min:0,max:"1",type:[{code:"CodeableConcept"}]},physiologicalCondition:{min:0,max:"1",type:[{code:"CodeableConcept"}]}}},ProdCharacteristic:{display:"ProdCharacteristic",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]},height:{min:0,max:"1",type:[{code:"Quantity"}]},width:{min:0,max:"1",type:[{code:"Quantity"}]},depth:{min:0,max:"1",type:[{code:"Quantity"}]},weight:{min:0,max:"1",type:[{code:"Quantity"}]},nominalVolume:{min:0,max:"1",type:[{code:"Quantity"}]},externalDiameter:{min:0,max:"1",type:[{code:"Quantity"}]},shape:{min:0,max:"1",type:[{code:"string"}]},color:{min:0,max:"*",type:[{code:"string"}]},imprint:{min:0,max:"*",type:[{code:"string"}]},image:{min:0,max:"*",type:[{code:"Attachment"}]},scoring:{min:0,max:"1",type:[{code:"CodeableConcept"}]}}},ProductShelfLife:{display:"ProductShelfLife",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]},identifier:{min:0,max:"1",type:[{code:"Identifier"}]},type:{min:1,max:"1",type:[{code:"CodeableConcept"}]},period:{min:1,max:"1",type:[{code:"Quantity"}]},specialPrecautionsForStorage:{min:0,max:"*",type:[{code:"CodeableConcept"}]}}},Quantity:{display:"Quantity",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},value:{min:0,max:"1",type:[{code:"decimal"}]},comparator:{min:0,max:"0",type:[{code:"code"}]},unit:{min:0,max:"1",type:[{code:"string"}]},system:{min:0,max:"1",type:[{code:"uri"}]},code:{min:0,max:"1",type:[{code:"code"}]}}},Range:{display:"Range",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},low:{min:0,max:"1",type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]},high:{min:0,max:"1",type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]}}},Ratio:{display:"Ratio",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},numerator:{min:0,max:"1",type:[{code:"Quantity"}]},denominator:{min:0,max:"1",type:[{code:"Quantity"}]}}},Reference:{display:"Reference",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},reference:{min:0,max:"1",type:[{code:"string"}]},type:{min:0,max:"1",type:[{code:"uri"}]},identifier:{min:0,max:"1",type:[{code:"Identifier"}]},display:{min:0,max:"1",type:[{code:"string"}]}}},RelatedArtifact:{display:"RelatedArtifact",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},type:{min:1,max:"1",type:[{code:"code"}]},label:{min:0,max:"1",type:[{code:"string"}]},display:{min:0,max:"1",type:[{code:"string"}]},citation:{min:0,max:"1",type:[{code:"markdown"}]},url:{min:0,max:"1",type:[{code:"url"}]},document:{min:0,max:"1",type:[{code:"Attachment"}]},resource:{min:0,max:"1",type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/Resource"]}]}}},SampledData:{display:"SampledData",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},origin:{min:1,max:"1",type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]},period:{min:1,max:"1",type:[{code:"decimal"}]},factor:{min:0,max:"1",type:[{code:"decimal"}]},lowerLimit:{min:0,max:"1",type:[{code:"decimal"}]},upperLimit:{min:0,max:"1",type:[{code:"decimal"}]},dimensions:{min:1,max:"1",type:[{code:"positiveInt"}]},data:{min:0,max:"1",type:[{code:"string"}]}}},Signature:{display:"Signature",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},type:{min:1,max:"*",type:[{code:"Coding"}]},when:{min:1,max:"1",type:[{code:"instant"}]},who:{min:1,max:"1",type:[{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Practitioner","http://hl7.org/fhir/StructureDefinition/PractitionerRole","http://hl7.org/fhir/StructureDefinition/RelatedPerson","http://hl7.org/fhir/StructureDefinition/Patient","http://hl7.org/fhir/StructureDefinition/Device","http://hl7.org/fhir/StructureDefinition/Organization"]}]},onBehalfOf:{min:0,max:"1",type:[{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Practitioner","http://hl7.org/fhir/StructureDefinition/PractitionerRole","http://hl7.org/fhir/StructureDefinition/RelatedPerson","http://hl7.org/fhir/StructureDefinition/Patient","http://hl7.org/fhir/StructureDefinition/Device","http://hl7.org/fhir/StructureDefinition/Organization"]}]},targetFormat:{min:0,max:"1",type:[{code:"code"}]},sigFormat:{min:0,max:"1",type:[{code:"code"}]},data:{min:0,max:"1",type:[{code:"base64Binary"}]}}},SubstanceAmount:{display:"SubstanceAmount",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]},"amount[x]":{min:0,max:"1",type:[{code:"Quantity"},{code:"Range"},{code:"string"}]},amountType:{min:0,max:"1",type:[{code:"CodeableConcept"}]},amountText:{min:0,max:"1",type:[{code:"string"}]},referenceRange:{min:0,max:"1",type:[{code:"Element"}]}}},SubstanceAmountReferenceRange:{display:"SubstanceAmountReferenceRange",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},lowLimit:{min:0,max:"1",type:[{code:"Quantity"}]},highLimit:{min:0,max:"1",type:[{code:"Quantity"}]}},parentType:"SubstanceAmount"},Timing:{display:"Timing",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},modifierExtension:{min:0,max:"*",type:[{code:"Extension"}]},event:{min:0,max:"*",type:[{code:"dateTime"}]},repeat:{min:0,max:"1",type:[{code:"Element"}]},code:{min:0,max:"1",type:[{code:"CodeableConcept"}]}}},TimingRepeat:{display:"TimingRepeat",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},"bounds[x]":{min:0,max:"1",type:[{code:"Duration"},{code:"Range"},{code:"Period"}]},count:{min:0,max:"1",type:[{code:"positiveInt"}]},countMax:{min:0,max:"1",type:[{code:"positiveInt"}]},duration:{min:0,max:"1",type:[{code:"decimal"}]},durationMax:{min:0,max:"1",type:[{code:"decimal"}]},durationUnit:{min:0,max:"1",type:[{code:"code"}]},frequency:{min:0,max:"1",type:[{code:"positiveInt"}]},frequencyMax:{min:0,max:"1",type:[{code:"positiveInt"}]},period:{min:0,max:"1",type:[{code:"decimal"}]},periodMax:{min:0,max:"1",type:[{code:"decimal"}]},periodUnit:{min:0,max:"1",type:[{code:"code"}]},dayOfWeek:{min:0,max:"*",type:[{code:"code"}]},timeOfDay:{min:0,max:"*",type:[{code:"time"}]},when:{min:0,max:"*",type:[{code:"code"}]},offset:{min:0,max:"1",type:[{code:"unsignedInt"}]}},parentType:"Timing"},TriggerDefinition:{display:"TriggerDefinition",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},type:{min:1,max:"1",type:[{code:"code"}]},name:{min:0,max:"1",type:[{code:"string"}]},"timing[x]":{min:0,max:"1",type:[{code:"Timing"},{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Schedule"]},{code:"date"},{code:"dateTime"}]},data:{min:0,max:"*",type:[{code:"DataRequirement"}]},condition:{min:0,max:"1",type:[{code:"Expression"}]}}},UsageContext:{display:"UsageContext",properties:{id:{min:0,max:"1",type:[{code:"string"}]},extension:{min:0,max:"*",type:[{code:"Extension"}]},code:{min:1,max:"1",type:[{code:"Coding"}]},"value[x]":{min:1,max:"1",type:[{code:"CodeableConcept"},{code:"Quantity"},{code:"Range"},{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/PlanDefinition","http://hl7.org/fhir/StructureDefinition/ResearchStudy","http://hl7.org/fhir/StructureDefinition/InsurancePlan","http://hl7.org/fhir/StructureDefinition/HealthcareService","http://hl7.org/fhir/StructureDefinition/Group","http://hl7.org/fhir/StructureDefinition/Location","http://hl7.org/fhir/StructureDefinition/Organization"]}]}}}}};function ke(){return{types:{}}}function Me(e){for(const t of e.entry){const e=t.resource;"StructureDefinition"===e.resourceType&&Ie(e)}}function Ie(e){if(!e.name)return;const t=e.snapshot?.element;t&&(t.forEach((t=>function(e,t){const n=t.path,i=t.type?.[0]?.code;if(void 0!==i&&"Element"!==i&&"BackboneElement"!==i)return;const o=n.split("."),r=Le(o);je.types[r]=function(e,t,n){return{structureDefinition:t,elementDefinition:n,display:e,description:n.definition,properties:{}}}(r,e,t),je.types[r].parentType=Le(o.slice(0,o.length-1))}(e,t))),t.forEach((e=>function(e){const t=e.path,n=t.split(".");if(1===n.length)return;const i=Le(n.slice(0,n.length-1)),o=je.types[i];if(!o)return;const r=n[n.length-1];o.properties[r]=e}(e))))}function Oe(e){for(const t of e.entry){const e=t.resource;"SearchParameter"===e.resourceType&&Ue(e)}}function Ue(e){if(e.base)for(const t of e.base){const n=je.types[t];n&&(n.searchParams||(n.searchParams={_id:{base:[t],code:"_id",type:"token",expression:t+".id"},_lastUpdated:{base:[t],code:"_lastUpdated",type:"date",expression:t+".meta.lastUpdated"},_compartment:{base:[t],code:"_compartment",type:"reference",expression:t+".meta.compartment"}}),n.searchParams[e.code]=e)}}function Le(e){return 1===e.length?e[0]:e.map(Z).join("")}function Ne(e){const t=e.replaceAll("[x]","").split(".").pop();return"id"===t?"ID":t.split(/(?=[A-Z])/).map(Z).join(" ").replace("_"," ").replace(/\s+/g," ")}function _e(e,t){const n=je.types[e];if(!n)return;const i=n.properties[t]??n.properties[t+"[x]"];if(i){if(i.contentReference){const e=i.contentReference.substring(1).split("."),t=e.pop();return _e(Le(e),t)}return i}}!function(e){e.Address="Address",e.Age="Age",e.Annotation="Annotation",e.Attachment="Attachment",e.BackboneElement="BackboneElement",e.CodeableConcept="CodeableConcept",e.Coding="Coding",e.ContactDetail="ContactDetail",e.ContactPoint="ContactPoint",e.Contributor="Contributor",e.Count="Count",e.DataRequirement="DataRequirement",e.Distance="Distance",e.Dosage="Dosage",e.Duration="Duration",e.Expression="Expression",e.Extension="Extension",e.HumanName="HumanName",e.Identifier="Identifier",e.MarketingStatus="MarketingStatus",e.Meta="Meta",e.Money="Money",e.Narrative="Narrative",e.ParameterDefinition="ParameterDefinition",e.Period="Period",e.Population="Population",e.ProdCharacteristic="ProdCharacteristic",e.ProductShelfLife="ProductShelfLife",e.Quantity="Quantity",e.Range="Range",e.Ratio="Ratio",e.Reference="Reference",e.RelatedArtifact="RelatedArtifact",e.SampledData="SampledData",e.Signature="Signature",e.SubstanceAmount="SubstanceAmount",e.SystemString="http://hl7.org/fhirpath/System.String",e.Timing="Timing",e.TriggerDefinition="TriggerDefinition",e.UsageContext="UsageContext",e.base64Binary="base64Binary",e.boolean="boolean",e.canonical="canonical",e.code="code",e.date="date",e.dateTime="dateTime",e.decimal="decimal",e.id="id",e.instant="instant",e.integer="integer",e.markdown="markdown",e.oid="oid",e.positiveInt="positiveInt",e.string="string",e.time="time",e.unsignedInt="unsignedInt",e.uri="uri",e.url="url",e.uuid="uuid"}(Ae||(Ae={}));const je=Re;var Qe,We,Be,$e,qe,Fe,He,ze,Ge,Ve,Xe,Ye,Je,Ze,Ke,et,tt,nt,it,ot,rt,at,st,ct,dt,lt,ut,mt,pt,ht,ft,yt,gt;const xt="1.0.6-5860113c";class vt extends Ee{constructor(n){if(super(),Qe.add(this),We.set(this,void 0),Be.set(this,void 0),$e.set(this,void 0),qe.set(this,void 0),Fe.set(this,void 0),He.set(this,void 0),ze.set(this,void 0),Ge.set(this,void 0),Ve.set(this,void 0),Xe.set(this,void 0),Ye.set(this,void 0),Je.set(this,void 0),Ze.set(this,void 0),Ke.set(this,void 0),et.set(this,void 0),tt.set(this,void 0),nt.set(this,void 0),it.set(this,void 0),n?.baseUrl&&!n.baseUrl.startsWith("http"))throw new Error("Base URL must start with http or https");t(this,We,n?.fetch||window.fetch.bind(window),"f"),t(this,Be,n?.createPdf,"f"),t(this,$e,new Ce,"f"),t(this,qe,new a(n?.resourceCacheSize??1e3),"f"),t(this,Fe,n?.cacheTime??6e4,"f"),t(this,He,function(e){if(!e)return e;return e.endsWith("/")?e:e+"/"}(n?.baseUrl)||"https://api.medplum.com/","f"),t(this,Ye,n?.clientId||"","f"),t(this,ze,n?.authorizeUrl||e(this,He,"f")+"oauth2/authorize","f"),t(this,Ge,n?.tokenUrl||e(this,He,"f")+"oauth2/token","f"),t(this,Ve,n?.logoutUrl||e(this,He,"f")+"oauth2/logout","f"),t(this,Xe,n?.onUnauthenticated,"f");const i=this.getActiveLogin();i&&(t(this,Ze,i.accessToken,"f"),t(this,Ke,i.refreshToken,"f"),e(this,Qe,"m",rt).call(this).catch(console.log)),e(this,Qe,"m",gt).call(this)}getBaseUrl(){return e(this,He,"f")}clear(){e(this,$e,"f").clear(),e(this,qe,"f").clear(),t(this,Ze,void 0,"f"),t(this,Ke,void 0,"f"),t(this,nt,void 0,"f"),t(this,it,void 0,"f"),this.dispatchEvent({type:"change"})}invalidateUrl(t){t=t.toString(),e(this,qe,"f").delete(t)}invalidateSearches(t){const n="fhir/R4/"+t;for(const t of e(this,qe,"f").keys())(t.endsWith(n)||t.includes(n+"?"))&&e(this,qe,"f").delete(t)}get(t,n={}){t=t.toString();const i=e(this,Qe,"m",at).call(this,t,n);if(i)return i.value;const o=new De(e(this,Qe,"m",ct).call(this,"GET",t,n));return e(this,Qe,"m",st).call(this,t,o),o}post(t,n,i,o={}){return t=t.toString(),n&&e(this,Qe,"m",ut).call(this,o,n),i&&e(this,Qe,"m",lt).call(this,o,i),this.invalidateUrl(t),e(this,Qe,"m",ct).call(this,"POST",t,o)}put(t,n,i,o={}){return t=t.toString(),n&&e(this,Qe,"m",ut).call(this,o,n),i&&e(this,Qe,"m",lt).call(this,o,i),this.invalidateUrl(t),e(this,Qe,"m",ct).call(this,"PUT",t,o)}patch(t,n,i={}){return t=t.toString(),e(this,Qe,"m",ut).call(this,i,n),e(this,Qe,"m",lt).call(this,i,"application/json-patch+json"),this.invalidateUrl(t),e(this,Qe,"m",ct).call(this,"PATCH",t,i)}delete(t,n={}){return t=t.toString(),this.invalidateUrl(t),e(this,Qe,"m",ct).call(this,"DELETE",t,n)}async startNewUser(e){return await this.startPkce(),this.post("auth/newuser",{...e,codeChallengeMethod:"S256",codeChallenge:sessionStorage.getItem("codeChallenge")})}async startNewProject(e){return this.post("auth/newproject",e)}async startNewPatient(e){return this.post("auth/newpatient",e)}async startLogin(t){const{codeChallenge:n,codeChallengeMethod:i}=this.getCodeChallenge(t);return this.post("auth/login",{...t,clientId:t.clientId??e(this,Ye,"f"),scope:t.scope,codeChallengeMethod:i,codeChallenge:n})}async startGoogleLogin(t){const{codeChallenge:n,codeChallengeMethod:i}=this.getCodeChallenge(t);return this.post("auth/google",{...t,clientId:t.clientId??e(this,Ye,"f"),scope:t.scope,codeChallengeMethod:i,codeChallenge:n})}getCodeChallenge(e){if(e.codeChallenge)return{codeChallenge:e.codeChallenge,codeChallengeMethod:e.codeChallengeMethod};const t=sessionStorage.getItem("codeChallenge");return t?{codeChallenge:t,codeChallengeMethod:"S256"}:{}}signOut(){this.clear()}async signInWithRedirect(){const t=new URLSearchParams(window.location.search).get("code");return t?this.processCode(t):void await e(this,Qe,"m",pt).call(this)}signOutWithRedirect(){window.location.assign(e(this,Ve,"f"))}fhirUrl(...t){return new URL(e(this,He,"f")+"fhir/R4/"+t.join("/"))}fhirSearchUrl(e,t){const n=this.fhirUrl(e);return t&&(n.search=t.toString()),n}search(e,t,n={}){return this.get(this.fhirSearchUrl(e,t),n)}searchOne(t,n,i={}){const o=this.fhirSearchUrl(t,n);o.searchParams.set("_count","1"),o.searchParams.sort();const r=o.toString()+"-searchOne",a=e(this,Qe,"m",at).call(this,r,i);if(a)return a.value;const s=new De(this.search(t,o.searchParams,i).then((e=>e.entry?.[0]?.resource)));return e(this,Qe,"m",st).call(this,r,s),s}searchResources(t,n,i={}){const o=this.fhirSearchUrl(t,n).toString()+"-searchResources",r=e(this,Qe,"m",at).call(this,o,i);if(r)return r.value;const a=new De(this.search(t,n,i).then((e=>e.entry?.map((e=>e.resource))??[])));return e(this,Qe,"m",st).call(this,o,a),a}searchValueSet(e,t,n={}){const i=this.fhirUrl("ValueSet","$expand");return i.searchParams.set("url",e),i.searchParams.set("filter",t),this.get(i.toString(),n)}getCached(t,n){const i=e(this,qe,"f").get(this.fhirUrl(t,n).toString())?.value;return i&&i.isOk()?i.read():void 0}getCachedReference(e){const t=e.reference;if(!t)return;const[n,i]=t.split("/");return n&&i?this.getCached(n,i):void 0}readResource(e,t,n={}){return this.get(this.fhirUrl(e,t),n)}readReference(e,t={}){const n=e?.reference;if(!n)return new De(Promise.reject(new Error("Missing reference")));const[i,o]=n.split("/");return i&&o?this.readResource(i,o,t):new De(Promise.reject(new Error("Invalid reference")))}getSchema(){return je}async requestSchema(e){if(e in je.types)return je;const t=`{\n      StructureDefinitionList(name: "${e}") {\n        name,\n        description,\n        snapshot {\n          element {\n            id,\n            path,\n            min,\n            max,\n            type {\n              code,\n              targetProfile\n            },\n            binding {\n              valueSet\n            },\n            definition\n          }\n        }\n      }\n      SearchParameterList(base: "${e}", _count: 100) {\n        base,\n        code,\n        type,\n        expression,\n        target\n      }\n    }`.replace(/\s+/g," "),n=await this.graphql(t);for(const e of n.data.StructureDefinitionList)Ie(e);for(const e of n.data.SearchParameterList)Ue(e);return je}readHistory(e,t,n={}){return this.get(this.fhirUrl(e,t,"_history"),n)}readVersion(e,t,n,i={}){return this.get(this.fhirUrl(e,t,"_history",n),i)}readPatientEverything(e,t={}){return this.get(this.fhirUrl("Patient",e,"$everything"),t)}createResource(e){if(!e.resourceType)throw new Error("Missing resourceType");return this.invalidateSearches(e.resourceType),this.post(this.fhirUrl(e.resourceType),e)}async createResourceIfNoneExist(e,t){return await this.searchOne(e.resourceType,t)??this.createResource(e)}createBinary(e,t,n,i){const o=this.fhirUrl("Binary");return t&&o.searchParams.set("_filename",t),i?this.uploadwithProgress(o,e,n,i):this.post(o,e,n)}uploadwithProgress(t,n,i,o){return new Promise(((r,a)=>{const s=new XMLHttpRequest;s.responseType="json",s.onabort=()=>a(new Error("Request aborted")),s.onerror=()=>a(new Error("Request error")),o&&(s.upload.onprogress=e=>o(e),s.upload.onload=e=>o(e)),s.onload=()=>{s.status>=200&&s.status<300?r(s.response):a(new Error(s.statusText))},s.open("POST",t),s.withCredentials=!0,s.setRequestHeader("Authorization","Bearer "+e(this,Ze,"f")),s.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),s.setRequestHeader("Content-Type",i),s.setRequestHeader("X-Medplum","extended"),s.send(n)}))}async createPdf(t,n,i,o){if(!e(this,Be,"f"))throw new Error("PDF creation not enabled");const r=await e(this,Be,"f").call(this,t,i,o);return this.createBinary(r,n,"application/pdf")}createComment(e,t){const n=this.getProfile();let i,o;return"Encounter"===e.resourceType&&(i=P(e),o=e.subject),"ServiceRequest"===e.resourceType&&(i=e.encounter,o=e.subject),"Patient"===e.resourceType&&(o=P(e)),this.createResource({resourceType:"Communication",basedOn:[P(e)],encounter:i,subject:o,sender:n?P(n):void 0,sent:(new Date).toISOString(),payload:[{contentString:t}]})}async updateResource(e){if(!e.resourceType)throw new Error("Missing resourceType");if(!e.id)throw new Error("Missing id");this.invalidateSearches(e.resourceType);return await this.put(this.fhirUrl(e.resourceType,e.id),e)??e}patchResource(e,t,n){return this.invalidateSearches(e),this.patch(this.fhirUrl(e,t),n)}deleteResource(e,t){return this.invalidateSearches(e),this.delete(this.fhirUrl(e,t))}validateResource(e){return this.post(this.fhirUrl(e.resourceType,"$validate"),e)}executeBatch(e){return this.post("fhir/R4",e)}sendEmail(e){return this.post("email/v1/send",e,"application/json")}graphql(e,t,n,i){return this.post(this.fhirUrl("$graphql"),{query:e,operationName:t,variables:n},"application/json",i)}readResourceGraph(e,t,n){return this.get(`${this.fhirUrl(e,t)}/$graph?graph=${n}`)}getActiveLogin(){return e(this,$e,"f").getObject("activeLogin")}async setActiveLogin(n){t(this,Ze,n.accessToken,"f"),t(this,Ke,n.refreshToken,"f"),t(this,nt,void 0,"f"),t(this,it,void 0,"f"),e(this,$e,"f").setObject("activeLogin",n),e(this,Qe,"m",ot).call(this,n),e(this,qe,"f").clear(),t(this,et,void 0,"f"),await e(this,Qe,"m",rt).call(this)}getAccessToken(){return e(this,Ze,"f")}setAccessToken(e){t(this,Ze,e,"f"),t(this,Ke,void 0,"f"),t(this,nt,void 0,"f"),t(this,it,void 0,"f")}getLogins(){return e(this,$e,"f").getObject("logins")??[]}isLoading(){return!!e(this,tt,"f")}getProfile(){return e(this,nt,"f")}async getProfileAsync(){return e(this,tt,"f")&&await e(this,tt,"f"),this.getProfile()}getUserConfiguration(){return e(this,it,"f")}async download(t,n={}){e(this,et,"f")&&await e(this,et,"f"),e(this,Qe,"m",dt).call(this,n);return(await e(this,We,"f").call(this,t.toString(),n)).blob()}async startPkce(){const e=pe();sessionStorage.setItem("pkceState",e);const t=pe();sessionStorage.setItem("codeVerifier",t);const n=J(await async function(e){return crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e))}(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");sessionStorage.setItem("codeChallenge",n)}processCode(t){const n=new URLSearchParams;n.set("grant_type","authorization_code"),n.set("client_id",e(this,Ye,"f")),n.set("code",t),n.set("redirect_uri",wt());const i=sessionStorage.getItem("codeVerifier");return i&&n.set("code_verifier",i),e(this,Qe,"m",ft).call(this,n)}async startClientLogin(n,i){t(this,Ye,n,"f"),t(this,Je,i,"f");const o=new URLSearchParams;return o.set("grant_type","client_credentials"),o.set("client_id",n),o.set("client_secret",i),e(this,Qe,"m",ft).call(this,o)}}function wt(){return window.location.protocol+"//"+window.location.host+"/"}var St,Et,Tt,bt,Dt,Ct,Pt,At,Rt,kt,Mt,It,Ot,Ut,Lt,Nt,_t,jt,Qt,Wt,Bt,$t,qt,Ft,Ht,zt,Gt,Vt,Xt,Yt,Jt,Zt;We=new WeakMap,Be=new WeakMap,$e=new WeakMap,qe=new WeakMap,Fe=new WeakMap,He=new WeakMap,ze=new WeakMap,Ge=new WeakMap,Ve=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,Je=new WeakMap,Ze=new WeakMap,Ke=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,it=new WeakMap,Qe=new WeakSet,ot=function(t){const n=this.getLogins().filter((e=>e.profile?.reference!==t.profile?.reference));n.push(t),e(this,$e,"f").setObject("logins",n)},rt=async function(){return t(this,tt,new Promise(((n,i)=>{this.get("auth/me").then((i=>{t(this,tt,void 0,"f"),t(this,nt,i.profile,"f"),t(this,it,i.config,"f"),this.dispatchEvent({type:"change"}),n(e(this,nt,"f"))})).catch(i)})),"f"),e(this,tt,"f")},at=function(t,n){if(e(this,Fe,"f")<=0||"no-cache"===n?.cache||"reload"===n?.cache)return;const i=e(this,qe,"f").get(t);return!i||i.requestTime+e(this,Fe,"f")<Date.now()?void 0:i},st=function(t,n){e(this,Fe,"f")>0&&e(this,qe,"f").set(t,{requestTime:Date.now(),value:n})},ct=async function(t,n,i={}){e(this,et,"f")&&await e(this,et,"f"),n.startsWith("http")||(n=e(this,He,"f")+n),i.method=t,e(this,Qe,"m",dt).call(this,i);const o=await e(this,We,"f").call(this,n,i);if(401===o.status)return e(this,Qe,"m",mt).call(this,t,n,i);if(204===o.status||304===o.status)return;const r=await o.json();if(o.status>=400)throw r;return r},dt=function(t){t.headers||(t.headers={});const n=t.headers;n["X-Medplum"]="extended",n["Content-Type"]||(n["Content-Type"]="application/fhir+json"),e(this,Ze,"f")&&(n.Authorization="Bearer "+e(this,Ze,"f")),t.cache||(t.cache="no-cache"),t.credentials||(t.credentials="include")},lt=function(e,t){e.headers||(e.headers={});e.headers["Content-Type"]=t},ut=function(e,t){"string"==typeof t||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof File&&t instanceof File||"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?e.body=t:t&&(e.body=JSON.stringify(t))},mt=function(t,n,i){return e(this,Qe,"m",ht).call(this)?e(this,Qe,"m",ct).call(this,t,n,i):(this.clear(),e(this,Xe,"f")&&e(this,Xe,"f").call(this),Promise.reject(new Error("Unauthenticated")))},pt=async function(){await this.startPkce();const t=new URL(e(this,ze,"f"));t.searchParams.set("response_type","code"),t.searchParams.set("state",sessionStorage.getItem("pkceState")),t.searchParams.set("client_id",e(this,Ye,"f")),t.searchParams.set("redirect_uri",wt()),t.searchParams.set("code_challenge_method","S256"),t.searchParams.set("code_challenge",sessionStorage.getItem("codeChallenge")),window.location.assign(t.toString())},ht=function(){if(e(this,et,"f"))return e(this,et,"f");if(e(this,Ke,"f")){const n=new URLSearchParams;return n.set("grant_type","refresh_token"),n.set("client_id",e(this,Ye,"f")),n.set("refresh_token",e(this,Ke,"f")),t(this,et,e(this,Qe,"m",ft).call(this,n),"f"),e(this,et,"f")}return e(this,Ye,"f")&&e(this,Je,"f")?(t(this,et,this.startClientLogin(e(this,Ye,"f"),e(this,Je,"f")),"f"),e(this,et,"f")):void 0},ft=async function(t){return e(this,We,"f").call(this,e(this,Ge,"f"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t,credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Failed to fetch tokens");return e.json()})).then((t=>e(this,Qe,"m",yt).call(this,t))).then((()=>this.getProfile()))},yt=async function(t){const n=t.access_token,i=be(n);if(Date.now()>=1e3*i.exp)throw this.clear(),new Error("Token expired");if(e(this,Ye,"f")&&i.client_id!==e(this,Ye,"f"))throw this.clear(),new Error("Token was not issued for this audience");await this.setActiveLogin({accessToken:n,refreshToken:t.refresh_token,project:t.project,profile:t.profile})},gt=function(){try{window.addEventListener("storage",(e=>{null!==e.key&&"activeLogin"!==e.key||window.location.reload()}))}catch(e){}};class Kt{constructor(e,t){this.operator=e,this.child=t}toString(){return`${this.operator}(${this.child.toString()})`}}class en{constructor(e,t,n){this.operator=e,this.left=t,this.right=n}toString(){return`${this.left.toString()} ${this.operator} ${this.right.toString()}`}}class tn{constructor(){St.set(this,{}),Et.set(this,{})}registerInfix(t,n){return e(this,Et,"f")[t]=n,this}registerPrefix(t,n){return e(this,St,"f")[t]=n,this}prefix(e,t,n){return this.registerPrefix(e,{parse(e,i){const o=e.consumeAndParse(t);return n(i,o)}})}infixLeft(e,t,n){return this.registerInfix(e,{parse(e,i,o){const r=e.consumeAndParse(t);return n(i,o,r)},precedence:t})}construct(t){return new nn(t,e(this,St,"f"),e(this,Et,"f"))}}St=new WeakMap,Et=new WeakMap;class nn{constructor(e,n,i){Tt.set(this,void 0),bt.set(this,void 0),Dt.set(this,void 0),t(this,Tt,e,"f"),t(this,bt,n,"f"),t(this,Dt,i,"f")}hasMore(){return e(this,Tt,"f").length>0}match(e){return this.peek()?.id===e&&(this.consume(),!0)}consumeAndParse(t=1/0){const n=this.consume(),i=e(this,bt,"f")[n.id];if(!i)throw Error(`Parse error at "${n.value}" (line ${n.line}, column ${n.column}). No matching prefix parselet.`);let o=i.parse(this,n);for(;t>this.getPrecedence();){const e=this.consume();o=this.getInfixParselet(e).parse(this,o,e)}return o}getPrecedence(){const e=this.peek();if(!e)return 1/0;const t=this.getInfixParselet(e);return t?t.precedence:1/0}consume(t,n){if(!e(this,Tt,"f").length)throw Error("Cant consume unknown more tokens.");if(t&&this.peek()?.id!==t){const e=this.peek();throw Error(`Expected ${t} but got "${e.id}" at line ${e.line} column ${e.column}.`)}if(n&&this.peek()?.value!==n){const e=this.peek();throw Error(`Expected "${n}" but got "${e.value}" at line ${e.line} column ${e.column}.`)}return e(this,Tt,"f").shift()}peek(){return e(this,Tt,"f").length>0?e(this,Tt,"f")[0]:void 0}removeComments(){t(this,Tt,e(this,Tt,"f").filter((e=>"Comment"!==e.id)),"f")}getInfixParselet(t){return e(this,Dt,"f")["Symbol"===t.id?t.value:t.id]}}Tt=new WeakMap,bt=new WeakMap,Dt=new WeakMap;const on=["year","years","month","months","week","weeks","day","days","hour","hours","minute","minutes","second","seconds","millisecond","milliseconds"];class rn{constructor(e,n,i){Ct.add(this),Pt.set(this,void 0),At.set(this,void 0),Rt.set(this,void 0),kt.set(this,[]),Mt.set(this,{index:0,line:1,column:0}),It.set(this,[]),t(this,Pt,e,"f"),t(this,At,n,"f"),t(this,Rt,i,"f")}tokenize(){for(;e(this,Mt,"f").index<e(this,Pt,"f").length;){const t=e(this,Ct,"m",Lt).call(this);t&&e(this,kt,"f").push(t)}return e(this,kt,"f")}}function an(e){if(e.startsWith("T"))return e+"T00:00:00.000Z".substring(e.length);if(e.length<=10)return e;try{return new Date(e).toISOString()}catch(t){return e}}function sn(e){return[{type:Ae.boolean,value:e}]}function cn(e){return null==e?{type:"undefined",value:void 0}:Number.isSafeInteger(e)?{type:Ae.integer,value:e}:"number"==typeof e?{type:Ae.decimal,value:e}:"boolean"==typeof e?{type:Ae.boolean,value:e}:"string"==typeof e?{type:Ae.string,value:e}:Sn(e)?{type:Ae.Quantity,value:e}:"object"==typeof e&&"resourceType"in e?{type:e.resourceType,value:e}:{type:Ae.BackboneElement,value:e}}function dn(e){return 0!==e.length&&!!e[0].value}function ln(e,t){if(!e?.value)return;const n=_e(e.type,t);if(n){const i=function(e,t,n){const i=n.type;if(!i||0===i.length)return;let o,r="undefined";if(1===i.length)o=e.value[t],r=i[0].code;else for(const n of i){const i=t.replace("[x]","")+Z(n.code);if(i in e.value){o=e.value[i],r=n.code;break}}if(q(o))return;"Element"!==r&&"BackboneElement"!==r||(r=Le(n.path?.split(".")));return Array.isArray(o)?o.map((e=>un(e,r))):un(o,r)}(e,t,n);if(i)return i}return function(e,t){const n=e.value;if(!n||"object"!=typeof n)return;let i;if(t in n)i=n[t];else for(const e in Ae){const o=t+Z(e);if(o in n){i=n[o];break}}if(q(i))return;return Array.isArray(i)?i.map(cn):cn(i)}(e,t)}function un(e,t){return"Resource"===t&&"object"==typeof e&&"resourceType"in e&&(t=e.resourceType),{type:t,value:e}}function mn(e){const t=[];for(const n of e){let e=!1;for(const i of t)if(dn(fn(n,i))){e=!0;break}e||t.push(n)}return t}function pn(e){return sn(!dn(e))}function hn(e,t){return 0===e.length||0===t.length?[]:e.length!==t.length?sn(!1):sn(e.every(((e,n)=>dn(fn(e,t[n])))))}function fn(e,t){const n=e.value,i=t.value;return"number"==typeof n&&"number"==typeof i?sn(Math.abs(n-i)<1e-8):Sn(n)&&Sn(i)?sn(En(n,i)):sn("object"==typeof n&&"object"==typeof i?Tn(e,t):n===i)}function yn(e,t){return 0===e.length&&0===t.length?sn(!0):e.length!==t.length?sn(!1):(e.sort(xn),t.sort(xn),sn(e.every(((e,n)=>dn(gn(e,t[n]))))))}function gn(e,t){const n=e.value,i=t.value;return"number"==typeof n&&"number"==typeof i?sn(Math.abs(n-i)<.01):Sn(n)&&Sn(i)?sn(En(n,i)):sn("object"==typeof n&&"object"==typeof i?Tn(n,i):"string"==typeof n&&"string"==typeof i?n.toLowerCase()===i.toLowerCase():n===i)}function xn(e,t){const n=e.value,i=t.value;return"number"==typeof n&&"number"==typeof i?n-i:"string"==typeof n&&"string"==typeof i?n.localeCompare(i):0}function vn(e,t){const{value:n}=e;if(null==n)return!1;switch(t){case"Boolean":return"boolean"==typeof n;case"Decimal":case"Integer":return"number"==typeof n;case"Date":return"string"==typeof n&&!!n.match(/^\d{4}(-\d{2}(-\d{2})?)?/);case"DateTime":return"string"==typeof n&&!!n.match(/^\d{4}(-\d{2}(-\d{2})?)?T/);case"Time":return"string"==typeof n&&!!n.match(/^T\d/);case"Period":return wn(n);case"Quantity":return Sn(n);default:return"object"==typeof n&&n?.resourceType===t}}function wn(e){return!(!e||"object"!=typeof e||!("start"in e))}function Sn(e){return!(!e||"object"!=typeof e||!("value"in e)||"number"!=typeof e.value)}function En(e,t){return Math.abs(e.value-t.value)<.01&&(e.unit===t.unit||e.code===t.code||e.unit===t.code||e.code===t.unit)}function Tn(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const i of n){const n=e[i],o=t[i];if(bn(n)&&bn(o)){if(!Tn(n,o))return!1}else if(n!==o)return!1}return!0}function bn(e){return null!==e&&"object"==typeof e}Pt=new WeakMap,At=new WeakMap,Rt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,It=new WeakMap,Ct=new WeakSet,Ot=function(){return e(this,kt,"f").slice(-1)[0]},Ut=function(){e(this,Ct,"m",Xt).call(this);const t=e(this,Ct,"m",Lt).call(this);return e(this,Ct,"m",Yt).call(this),t},Lt=function(){e(this,Ct,"m",Nt).call(this);const t=e(this,Ct,"m",zt).call(this);if(!t)return;e(this,Ct,"m",Xt).call(this);const n=e(this,Ct,"m",Vt).call(this);return"/"===t&&"*"===n?e(this,Ct,"m",_t).call(this):"/"===t&&"/"===n?e(this,Ct,"m",jt).call(this):"'"===t||'"'===t?e(this,Ct,"m",Qt).call(this,t):"`"===t?e(this,Ct,"m",Wt).call(this):"@"===t?e(this,Ct,"m",Bt).call(this):t.match(/\d/)?e(this,Ct,"m",$t).call(this):t.match(/\w/)||"$"===t&&n.match(/\w/)?e(this,Ct,"m",qt).call(this):e(this,Ct,"m",Ft).call(this)},Nt=function(){e(this,Ct,"m",Ht).call(this,(()=>e(this,Ct,"m",zt).call(this).match(/\s/)))},_t=function(){const t=e(this,Mt,"f").index;return e(this,Ct,"m",Ht).call(this,(()=>"*"!==e(this,Ct,"m",zt).call(this)||"/"!==e(this,Ct,"m",Vt).call(this))),e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Zt).call(this,"Comment",e(this,Pt,"f").substring(t,e(this,Mt,"f").index))},jt=function(){return e(this,Ct,"m",Zt).call(this,"Comment",e(this,Ct,"m",Ht).call(this,(()=>"\n"!==e(this,Ct,"m",zt).call(this))))},Qt=function(t){e(this,Ct,"m",Jt).call(this);const n=e(this,Ct,"m",Zt).call(this,"String",e(this,Ct,"m",Ht).call(this,(()=>"\\"===e(this,Ct,"m",Gt).call(this)||e(this,Ct,"m",zt).call(this)!==t)));return e(this,Ct,"m",Jt).call(this),n},Wt=function(){e(this,Ct,"m",Jt).call(this);const t=e(this,Ct,"m",Zt).call(this,"Symbol",e(this,Ct,"m",Ht).call(this,(()=>"`"!==e(this,Ct,"m",zt).call(this))));return e(this,Ct,"m",Jt).call(this),t},Bt=function(){e(this,Ct,"m",Jt).call(this);const t=e(this,Mt,"f").index;return e(this,Ct,"m",Ht).call(this,(()=>e(this,Ct,"m",zt).call(this).match(/[\d-]/))),"T"===e(this,Ct,"m",zt).call(this)&&(e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Ht).call(this,(()=>e(this,Ct,"m",zt).call(this).match(/[\d:]/))),"."===e(this,Ct,"m",zt).call(this)&&e(this,Ct,"m",Vt).call(this).match(/\d/)&&(e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Ht).call(this,(()=>e(this,Ct,"m",zt).call(this).match(/\d/)))),"Z"===e(this,Ct,"m",zt).call(this)?e(this,Ct,"m",Jt).call(this):"+"!==e(this,Ct,"m",zt).call(this)&&"-"!==e(this,Ct,"m",zt).call(this)||(e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Ht).call(this,(()=>e(this,Ct,"m",zt).call(this).match(/[\d:]/))))),e(this,Ct,"m",Zt).call(this,"DateTime",e(this,Pt,"f").substring(t,e(this,Mt,"f").index))},$t=function(){const t=e(this,Mt,"f").index;let n="Number";return e(this,Ct,"m",Ht).call(this,(()=>e(this,Ct,"m",zt).call(this).match(/\d/))),"."===e(this,Ct,"m",zt).call(this)&&e(this,Ct,"m",Vt).call(this).match(/\d/)&&(e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Ht).call(this,(()=>e(this,Ct,"m",zt).call(this).match(/\d/))))," "===e(this,Ct,"m",zt).call(this)&&function(e){if(e){if("String"===e.id)return!0;if("Symbol"===e.id&&on.includes(e.value))return!0}return!1}(e(this,Ct,"m",Ut).call(this))&&(n="Quantity",e(this,Ct,"m",Lt).call(this)),e(this,Ct,"m",Zt).call(this,n,e(this,Pt,"f").substring(t,e(this,Mt,"f").index))},qt=function(){const t=e(this,Ct,"m",Ht).call(this,(()=>e(this,Ct,"m",zt).call(this).match(/[$\w]/)));return"."!==e(this,Ct,"m",Ot).call(this)?.value&&e(this,At,"f").includes(t)?e(this,Ct,"m",Zt).call(this,t,t):e(this,Ct,"m",Zt).call(this,"Symbol",t)},Ft=function(){const t=e(this,Ct,"m",zt).call(this),n=t+e(this,Ct,"m",Vt).call(this);return e(this,Rt,"f").includes(n)?(e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Zt).call(this,n,n)):(e(this,Ct,"m",Jt).call(this),e(this,Ct,"m",Zt).call(this,t,t))},Ht=function(t){const n=e(this,Mt,"f").index;for(;e(this,Mt,"f").index<e(this,Pt,"f").length&&t();)e(this,Ct,"m",Jt).call(this);return e(this,Pt,"f").substring(n,e(this,Mt,"f").index)},zt=function(){return e(this,Pt,"f")[e(this,Mt,"f").index]},Gt=function(){return e(this,Pt,"f")[e(this,Mt,"f").index-1]??""},Vt=function(){return e(this,Pt,"f")[e(this,Mt,"f").index+1]??""},Xt=function(){e(this,It,"f").push({...e(this,Mt,"f")})},Yt=function(){const t=e(this,It,"f").pop();if(!t)throw new Error("No mark to reset to");e(this,Mt,"f").index=t.index,e(this,Mt,"f").line=t.line,e(this,Mt,"f").column=t.column},Jt=function(){e(this,Mt,"f").index++,"\n"===e(this,Ct,"m",zt).call(this)?(e(this,Mt,"f").line++,e(this,Mt,"f").column=0):e(this,Mt,"f").column++},Zt=function(t,n){const i=e(this,It,"f").pop();if(!i)throw new Error("No mark for token");return{id:t,value:n,...i}};const Dn=()=>[],Cn={empty:e=>sn(0===e.length),exists:(e,t)=>sn(t?e.filter((e=>dn(t.eval([e])))).length>0:e.length>0),all:(e,t)=>sn(e.every((e=>dn(t.eval([e]))))),allTrue:e=>{for(const t of e)if(!t.value)return sn(!1);return sn(!0)},anyTrue:e=>{for(const t of e)if(t.value)return sn(!0);return sn(!1)},allFalse:e=>{for(const t of e)if(t.value)return sn(!1);return sn(!0)},anyFalse:e=>{for(const t of e)if(!t.value)return sn(!0);return sn(!1)},subsetOf:Dn,supersetOf:Dn,count:e=>[{type:Ae.integer,value:e.length}],distinct:e=>{const t=[];for(const n of e)t.some((e=>e.value===n.value))||t.push(n);return t},isDistinct:e=>sn(e.length===Cn.distinct(e).length),where:(e,t)=>e.filter((e=>dn(t.eval([e])))),select:(e,t)=>e.map((e=>t.eval([e]))).flat(),repeat:Dn,ofType:(e,t)=>e.filter((e=>e.type===t.name)),single:e=>{if(e.length>1)throw new Error("Expected input length one for single()");return 0===e.length?[]:e.slice(0,1)},first:e=>0===e.length?[]:e.slice(0,1),last:e=>0===e.length?[]:e.slice(e.length-1,e.length),tail:e=>0===e.length?[]:e.slice(1,e.length),skip:(e,t)=>{const n=t.eval(e)[0]?.value;if("number"!=typeof n)throw new Error("Expected a number for skip(num)");return n>=e.length?[]:n<=0?e:e.slice(n,e.length)},take:(e,t)=>{const n=t.eval(e)[0]?.value;if("number"!=typeof n)throw new Error("Expected a number for take(num)");return n>=e.length?e:n<=0?[]:e.slice(0,n)},intersect:(e,t)=>{if(!t)return e;const n=t.eval(e),i=[];for(const t of e)!i.some((e=>e.value===t.value))&&n.some((e=>e.value===t.value))&&i.push(t);return i},exclude:(e,t)=>{if(!t)return e;const n=t.eval(e),i=[];for(const t of e)n.some((e=>e.value===t.value))||i.push(t);return i},union:(e,t)=>{if(!t)return e;const n=t.eval(e);return mn([...e,...n])},combine:(e,t)=>{if(!t)return e;const n=t.eval(e);return[...e,...n]},iif:(e,t,n,i)=>{const o=t.eval(e);if(o.length>1||1===o.length&&"boolean"!=typeof o[0].value)throw new Error("Expected criterion to evaluate to a Boolean");return dn(o)?n.eval(e):i?i.eval(e):[]},toBoolean:e=>{if(0===e.length)return[];const[{value:t}]=Rn(e,1);if("boolean"==typeof t)return[{type:Ae.boolean,value:t}];if("number"==typeof t&&(0===t||1===t))return sn(!!t);if("string"==typeof t){const e=t.toLowerCase();if(["true","t","yes","y","1","1.0"].includes(e))return sn(!0);if(["false","f","no","n","0","0.0"].includes(e))return sn(!1)}return[]},convertsToBoolean:e=>0===e.length?[]:sn(1===Cn.toBoolean(e).length),toInteger:e=>{if(0===e.length)return[];const[{value:t}]=Rn(e,1);return"number"==typeof t?[{type:Ae.integer,value:t}]:"string"==typeof t&&t.match(/^[+-]?\d+$/)?[{type:Ae.integer,value:parseInt(t,10)}]:"boolean"==typeof t?[{type:Ae.integer,value:t?1:0}]:[]},convertsToInteger:e=>0===e.length?[]:sn(1===Cn.toInteger(e).length),toDate:e=>{if(0===e.length)return[];const[{value:t}]=Rn(e,1);return"string"==typeof t&&t.match(/^\d{4}(-\d{2}(-\d{2})?)?/)?[{type:Ae.date,value:an(t)}]:[]},convertsToDate:e=>0===e.length?[]:sn(1===Cn.toDate(e).length),toDateTime:e=>{if(0===e.length)return[];const[{value:t}]=Rn(e,1);return"string"==typeof t&&t.match(/^\d{4}(-\d{2}(-\d{2})?)?/)?[{type:Ae.dateTime,value:an(t)}]:[]},convertsToDateTime:e=>0===e.length?[]:sn(1===Cn.toDateTime(e).length),toDecimal:e=>{if(0===e.length)return[];const[{value:t}]=Rn(e,1);return"number"==typeof t?[{type:Ae.decimal,value:t}]:"string"==typeof t&&t.match(/^-?\d{1,9}(\.\d{1,9})?$/)?[{type:Ae.decimal,value:parseFloat(t)}]:"boolean"==typeof t?[{type:Ae.decimal,value:t?1:0}]:[]},convertsToDecimal:e=>0===e.length?[]:sn(1===Cn.toDecimal(e).length),toQuantity:e=>{if(0===e.length)return[];const[{value:t}]=Rn(e,1);return Sn(t)?[{type:Ae.Quantity,value:t}]:"number"==typeof t?[{type:Ae.Quantity,value:{value:t,unit:"1"}}]:"string"==typeof t&&t.match(/^-?\d{1,9}(\.\d{1,9})?/)?[{type:Ae.Quantity,value:{value:parseFloat(t),unit:"1"}}]:"boolean"==typeof t?[{type:Ae.Quantity,value:{value:t?1:0,unit:"1"}}]:[]},convertsToQuantity:e=>0===e.length?[]:sn(1===Cn.toQuantity(e).length),toString:e=>{if(0===e.length)return[];const[{value:t}]=Rn(e,1);return null==t?[]:Sn(t)?[{type:Ae.string,value:`${t.value} '${t.unit}'`}]:[{type:Ae.string,value:t.toString()}]},convertsToString:e=>0===e.length?[]:sn(1===Cn.toString(e).length),toTime:e=>{if(0===e.length)return[];const[{value:t}]=Rn(e,1);if("string"==typeof t){const e=t.match(/^T?(\d{2}(:\d{2}(:\d{2})?)?)/);if(e)return[{type:Ae.time,value:an("T"+e[1])}]}return[]},convertsToTime:e=>0===e.length?[]:sn(1===Cn.toTime(e).length),indexOf:(e,t)=>Pn(((e,t)=>e.indexOf(t)),e,t),substring:(e,t,n)=>Pn(((e,t,n)=>{const i=t,o=n?i+n:e.length;return i<0||i>=e.length?void 0:e.substring(i,o)}),e,t,n),startsWith:(e,t)=>Pn(((e,t)=>e.startsWith(t)),e,t),endsWith:(e,t)=>Pn(((e,t)=>e.endsWith(t)),e,t),contains:(e,t)=>Pn(((e,t)=>e.includes(t)),e,t),upper:e=>Pn((e=>e.toUpperCase()),e),lower:e=>Pn((e=>e.toLowerCase()),e),replace:(e,t,n)=>Pn(((e,t,n)=>e.replaceAll(t,n)),e,t,n),matches:(e,t)=>Pn(((e,t)=>!!e.match(t)),e,t),replaceMatches:(e,t,n)=>Pn(((e,t,n)=>e.replaceAll(t,n)),e,t,n),length:e=>Pn((e=>e.length),e),toChars:e=>Pn((e=>e?e.split(""):void 0),e),abs:e=>An(Math.abs,e),ceiling:e=>An(Math.ceil,e),exp:e=>An(Math.exp,e),floor:e=>An(Math.floor,e),ln:e=>An(Math.log,e),log:(e,t)=>An(((e,t)=>Math.log(e)/Math.log(t)),e,t),power:(e,t)=>An(Math.pow,e,t),round:e=>An(Math.round,e),sqrt:e=>An(Math.sqrt,e),truncate:e=>An((e=>0|e),e),children:Dn,descendants:Dn,trace:(e,t)=>(console.log("trace",e,t),e),now:()=>[{type:Ae.dateTime,value:(new Date).toISOString()}],timeOfDay:()=>[{type:Ae.time,value:(new Date).toISOString().substring(11)}],today:()=>[{type:Ae.date,value:(new Date).toISOString().substring(0,10)}],between:(e,t,n,i)=>{const o=Cn.toDateTime(t.eval(e));if(0===o.length)throw new Error("Invalid start date");const r=Cn.toDateTime(n.eval(e));if(0===r.length)throw new Error("Invalid end date");const a=i.eval(e)[0]?.value;if("years"!==a&&"months"!==a&&"days"!==a)throw new Error("Invalid units");const s=L(o[0].value,r[0].value);return[{type:Ae.Quantity,value:{value:s[a],unit:a}}]},is:(e,t)=>{let n="";return t instanceof Un?n=t.name:t instanceof $n&&(n=t.left.name+"."+t.right.name),n?e.map((e=>({type:Ae.boolean,value:vn(e,n)}))):[]},not:e=>Cn.toBoolean(e).map((e=>({type:Ae.boolean,value:!e.value}))),resolve:e=>e.map((e=>{const t=e.value;let n;if("string"==typeof t)n=t;else if("object"==typeof t){const e=t;if(e.resource)return cn(e.resource);n=e.reference}if(!n)return{type:Ae.BackboneElement,value:null};const[i,o]=n.split("/");return{type:Ae.BackboneElement,value:{resourceType:i,id:o}}})).filter((e=>!!e.value)),as:e=>e,type:e=>e.map((({value:e})=>"boolean"==typeof e?{type:Ae.BackboneElement,value:{namespace:"System",name:"Boolean"}}:"number"==typeof e?{type:Ae.BackboneElement,value:{namespace:"System",name:"Integer"}}:e&&"object"==typeof e&&"resourceType"in e?{type:Ae.BackboneElement,value:{namespace:"FHIR",name:e.resourceType}}:{type:Ae.BackboneElement,value:null})),conformsTo:(e,t)=>{const n=t.eval(e)[0].value;if(!n.startsWith("http://hl7.org/fhir/StructureDefinition/"))throw new Error("Expected a StructureDefinition URL");const i=n.replace("http://hl7.org/fhir/StructureDefinition/","");return e.map((e=>({type:Ae.boolean,value:e.value?.resourceType===i})))}};function Pn(e,t,...n){if(0===t.length)return[];const[{value:i}]=Rn(t,1);if("string"!=typeof i)throw new Error("String function cannot be called with non-string");const o=e(i,...n.map((e=>e&&e.eval(t)?.[0]?.value)));return void 0===o?[]:Array.isArray(o)?o.map(cn):[cn(o)]}function An(e,t,...n){if(0===t.length)return[];const[{value:i}]=Rn(t,1),o=Sn(i),r=o?i.value:i;if("number"!=typeof r)throw new Error("Math function cannot be called with non-number");const a=e(r,...n.map((e=>e.eval(t)?.[0]?.value)));return[{type:o?Ae.Quantity:t[0].type,value:o?{...i,value:a}:a}]}function Rn(e,t){if(e.length!==t)throw new Error(`Expected ${t} arguments`);for(const t of e)if(null==t)throw new Error("Expected non-null argument");return e}var kn,Mn;class In{constructor(e,t){this.original=e,this.child=t}eval(e){try{return e.length>0?e.map((e=>this.child.eval([e]))).flat():this.child.eval([])}catch(e){throw new Error(`FhirPathError on "${this.original}": ${e}`)}}toString(){return this.child.toString()}}class On{constructor(e){this.value=e}eval(){return[this.value]}toString(){const e=this.value.value;return"string"==typeof e?`'${e}'`:e.toString()}}class Un{constructor(e){this.name=e,kn.add(this)}eval(t){return"$this"===this.name?t:t.map((t=>e(this,kn,"m",Mn).call(this,t))).flat().filter((e=>void 0!==e?.value))}toString(){return this.name}}kn=new WeakSet,Mn=function(e){const t=e.value;if(t&&"object"==typeof t)return"resourceType"in t&&t.resourceType===this.name?e:ln(e,this.name)};class Ln{eval(){return[]}toString(){return"{}"}}class Nn extends Kt{constructor(e,t,n){super(e,t),this.impl=n}eval(e){return this.impl(this.child.eval(e))}toString(){return this.child.toString()}}class _n extends en{constructor(e,t){super("as",e,t)}eval(e){return Cn.ofType(this.left.eval(e),this.right)}}class jn extends en{constructor(e,t,n,i){super(e,t,n),this.impl=i}eval(e){const t=this.left.eval(e);if(1!==t.length)return[];const n=this.right.eval(e);if(1!==n.length)return[];const i=t[0].value,o=n[0].value,r=Sn(i)?i.value:i,a=Sn(o)?o.value:o,s=this.impl(r,a);return"boolean"==typeof s?sn(s):Sn(i)?[{type:Ae.Quantity,value:{...i,value:s}}]:[cn(s)]}}class Qn extends en{constructor(e,t){super("&",e,t)}eval(e){const t=[...this.left.eval(e),...this.right.eval(e)];return t.length>0&&t.every((e=>"string"==typeof e.value))?[{type:Ae.string,value:t.map((e=>e.value)).join("")}]:t}}class Wn extends en{constructor(e,t){super("contains",e,t)}eval(e){const t=this.left.eval(e),n=this.right.eval(e);return sn(t.some((e=>e.value===n[0].value)))}}class Bn extends en{constructor(e,t){super("in",e,t)}eval(e){const t=this.left.eval(e);return sn(this.right.eval(e).some((e=>e.value===t[0].value)))}}class $n extends en{constructor(e,t){super(".",e,t)}eval(e){return this.right.eval(this.left.eval(e))}toString(){return`${this.left.toString()}.${this.right.toString()}`}}class qn extends en{constructor(e,t){super("|",e,t)}eval(e){return mn([...this.left.eval(e),...this.right.eval(e)])}}class Fn extends en{constructor(e,t){super("=",e,t)}eval(e){return hn(this.left.eval(e),this.right.eval(e))}}class Hn extends en{constructor(e,t){super("!=",e,t)}eval(e){return pn(hn(this.left.eval(e),this.right.eval(e)))}}class zn extends en{constructor(e,t){super("~",e,t)}eval(e){return yn(this.left.eval(e),this.right.eval(e))}}class Gn extends en{constructor(e,t){super("!~",e,t)}eval(e){return pn(yn(this.left.eval(e),this.right.eval(e)))}}class Vn extends en{constructor(e,t){super("is",e,t)}eval(e){const t=this.left.eval(e);if(1!==t.length)return[];const n=this.right.name;return sn(vn(t[0],n))}}class Xn extends en{constructor(e,t){super("and",e,t)}eval(e){const t=this.left.eval(e),n=this.right.eval(e);return!0===t[0]?.value&&!0===n[0]?.value?sn(!0):!1===t[0]?.value||!1===n[0]?.value?sn(!1):[]}}class Yn extends en{constructor(e,t){super("or",e,t)}eval(e){const t=this.left.eval(e);if(dn(t))return t;const n=this.right.eval(e);return dn(n)?n:[]}}class Jn extends en{constructor(e,t){super("xor",e,t)}eval(e){const t=this.left.eval(e),n=this.right.eval(e);if(0===t.length&&0===n.length)return[];const i=0===t.length?null:t[0].value,o=0===n.length?null:n[0].value;return!0===i&&!0!==o||!0!==i&&!0===o?sn(!0):!0===i&&!0===o||!1===i&&!1===o?sn(!1):[]}}class Zn{constructor(e,t){this.name=e,this.args=t}eval(e){const t=Cn[this.name];if(!t)throw new Error("Unrecognized function: "+this.name);return t(e,...this.args)}toString(){return`${this.name}(${this.args.map((e=>e.toString())).join(", ")})`}}class Kn{constructor(e,t){this.left=e,this.expr=t}eval(e){const t=this.expr.eval(e);if(1!==t.length)return[];const n=t[0].value;if("number"!=typeof n)throw new Error("Invalid indexer expression: should return integer}");const i=this.left.eval(e);return n in i?[i[n]]:[]}toString(){return`${this.left.toString()}[${this.expr.toString()}]`}}const ei=["true","false"],ti=["!=","!~","<=",">=","{}","->"];function ni(e){return new rn(e,ei,ti).tokenize()}const ii={parse(e){const t=e.consumeAndParse();if(!e.match(")"))throw new Error("Parse error: expected `)` got `"+e.peek()?.value+"`");return t}},oi={parse(e,t){const n=e.consumeAndParse();if(!e.match("]"))throw new Error("Parse error: expected `]`");return new Kn(t,n)},precedence:2},ri={parse(e,t){if(!(t instanceof Un))throw new Error("Unexpected parentheses");const n=[];for(;!e.match(")");)n.push(e.consumeAndParse()),e.match(",");return new Zn(t.name,n)},precedence:0};function ai(e){const t=e.split(" "),n=parseFloat(t[0]);let i=t[1];return i=i&&i.startsWith("'")&&i.endsWith("'")?i.substring(1,i.length-1):"{"+i+"}",{value:n,unit:i}}function si(){return(new tn).registerPrefix("String",{parse:(e,t)=>new On({type:Ae.string,value:t.value})}).registerPrefix("DateTime",{parse:(e,t)=>new On({type:Ae.dateTime,value:an(t.value)})}).registerPrefix("Quantity",{parse:(e,t)=>new On({type:Ae.Quantity,value:ai(t.value)})}).registerPrefix("Number",{parse:(e,t)=>new On({type:Ae.decimal,value:parseFloat(t.value)})}).registerPrefix("true",{parse:()=>new On({type:Ae.boolean,value:!0})}).registerPrefix("false",{parse:()=>new On({type:Ae.boolean,value:!1})}).registerPrefix("Symbol",{parse:(e,t)=>new Un(t.value)}).registerPrefix("{}",{parse:()=>new Ln}).registerPrefix("(",ii).registerInfix("[",oi).registerInfix("(",ri).prefix("+",3,((e,t)=>new Nn("+",t,(e=>e)))).prefix("-",3,((e,t)=>new jn("-",t,t,((e,t)=>-t)))).infixLeft(".",1,((e,t,n)=>new $n(e,n))).infixLeft("/",4,((e,t,n)=>new jn("/",e,n,((e,t)=>e/t)))).infixLeft("*",4,((e,t,n)=>new jn("*",e,n,((e,t)=>e*t)))).infixLeft("+",5,((e,t,n)=>new jn("+",e,n,((e,t)=>e+t)))).infixLeft("-",5,((e,t,n)=>new jn("-",e,n,((e,t)=>e-t)))).infixLeft("|",7,((e,t,n)=>new qn(e,n))).infixLeft("=",9,((e,t,n)=>new Fn(e,n))).infixLeft("!=",9,((e,t,n)=>new Hn(e,n))).infixLeft("~",9,((e,t,n)=>new zn(e,n))).infixLeft("!~",9,((e,t,n)=>new Gn(e,n))).infixLeft("<",8,((e,t,n)=>new jn("<",e,n,((e,t)=>e<t)))).infixLeft("<=",8,((e,t,n)=>new jn("<=",e,n,((e,t)=>e<=t)))).infixLeft(">",8,((e,t,n)=>new jn(">",e,n,((e,t)=>e>t)))).infixLeft(">=",8,((e,t,n)=>new jn(">=",e,n,((e,t)=>e>=t)))).infixLeft("&",5,((e,t,n)=>new Qn(e,n))).infixLeft("and",6,((e,t,n)=>new Xn(e,n))).infixLeft("as",6,((e,t,n)=>new _n(e,n))).infixLeft("contains",6,((e,t,n)=>new Wn(e,n))).infixLeft("div",6,((e,t,n)=>new jn("div",e,n,((e,t)=>e/t|0)))).infixLeft("in",6,((e,t,n)=>new Bn(e,n))).infixLeft("is",6,((e,t,n)=>new Vn(e,n))).infixLeft("mod",6,((e,t,n)=>new jn("mod",e,n,((e,t)=>e%t)))).infixLeft("or",6,((e,t,n)=>new Yn(e,n))).infixLeft("xor",6,((e,t,n)=>new Jn(e,n)))}const ci=si();function di(e){return new In(e,ci.construct(ni(e)).consumeAndParse())}function li(e,t){const n=Array.isArray(t)?t:[t];for(let e=0;e<n.length;e++){const t=n[e];"object"==typeof t&&"type"in t&&"value"in t||(n[e]=cn(n[e]))}return ui(e,n).map((e=>e.value))}function ui(e,t){return di(e).eval(t)}class mi{constructor(e="\r",t="|",n="^",i="~",o="\\",r="&"){this.segmentSeparator=e,this.fieldSeparator=t,this.componentSeparator=n,this.repetitionSeparator=i,this.escapeCharacter=o,this.subcomponentSeparator=r}getMsh2(){return this.fieldSeparator+this.componentSeparator+this.repetitionSeparator+this.escapeCharacter+this.subcomponentSeparator}}class pi{constructor(e,t=new mi){this.context=t,this.segments=e}get(e){return"number"==typeof e?this.segments[e]:this.segments.find((t=>t.name===e))}getAll(e){return this.segments.filter((t=>t.name===e))}toString(){return this.segments.map((e=>e.toString())).join(this.context.segmentSeparator)}buildAck(){const e=new Date,t=this.get("MSH"),n=t?.get(2)?.toString()||"",i=t?.get(3)?.toString()||"",o=t?.get(4)?.toString()||"",r=t?.get(5)?.toString()||"",a=t?.get(9)?.toString()||"",s=t?.get(12)?.toString()||"2.5.1";return new pi([new hi(["MSH",this.context.getMsh2(),o,r,n,i,e.toISOString(),"","ACK",e.getTime().toString(),"P",s],this.context),new hi(["MSA","AA",a,"OK"],this.context)])}static parse(e){if(!e.startsWith("MSH")){const e=new Error("Invalid HL7 message");throw e.type="entity.parse.failed",e}const t=new mi("\r",e.charAt(3),e.charAt(4),e.charAt(5),e.charAt(6),e.charAt(7));return new pi(e.split(/[\r\n]+/).map((e=>hi.parse(e,t))),t)}}class hi{constructor(e,t=new mi){this.context=t,V(e)?this.fields=e.map((e=>fi.parse(e))):this.fields=e,this.name=this.fields[0].components[0][0]}get(e){return this.fields[e]}toString(){return this.fields.map((e=>e.toString())).join(this.context.fieldSeparator)}static parse(e,t=new mi){return new hi(e.split(t.fieldSeparator).map((e=>fi.parse(e,t))),t)}}class fi{constructor(e,t=new mi){this.context=t,this.components=e}get(e,t,n=0){let i=this.components[n][e]||"";return void 0!==t&&(i=i.split(this.context.subcomponentSeparator)[t]||""),i}toString(){return this.components.map((e=>e.join(this.context.componentSeparator))).join(this.context.repetitionSeparator)}static parse(e,t=new mi){return new fi(e.split(t.repetitionSeparator).map((e=>e.split(t.componentSeparator))),t)}}const yi=20;var gi;!function(e){e.EQUALS="eq",e.NOT_EQUALS="ne",e.GREATER_THAN="gt",e.LESS_THAN="lt",e.GREATER_THAN_OR_EQUALS="ge",e.LESS_THAN_OR_EQUALS="le",e.STARTS_AFTER="sa",e.ENDS_BEFORE="eb",e.APPROXIMATELY="ap",e.CONTAINS="contains",e.EXACT="exact",e.TEXT="text",e.NOT="not",e.ABOVE="above",e.BELOW="below",e.IN="in",e.NOT_IN="not-in",e.OF_TYPE="of-type",e.MISSING="missing"}(gi||(gi={}));const xi=[gi.CONTAINS,gi.EXACT,gi.TEXT,gi.NOT,gi.ABOVE,gi.BELOW,gi.IN,gi.NOT_IN,gi.OF_TYPE,gi.MISSING],vi=[gi.NOT_EQUALS,gi.GREATER_THAN,gi.LESS_THAN,gi.GREATER_THAN_OR_EQUALS,gi.LESS_THAN_OR_EQUALS,gi.STARTS_AFTER,gi.ENDS_BEFORE,gi.APPROXIMATELY];function wi(e){const t=new URL(e,"https://example.com/"),n=t.pathname.replace(/(^\/)|(\/$)/g,"").split("/").pop();let i,o,r,a,s,c;return new URLSearchParams(t.search).forEach(((e,t)=>{"_fields"===t?r=e.split(","):"_offset"===t?a=parseInt(e):"_count"===t?s=parseInt(e):"_total"===t?c=e:"_sort"===t?(o=o||[],o.push(function(e){return e.startsWith("-")?{code:e.substring(1),descending:!0}:{code:e}}(e))):(i=i||[],i.push(function(e,t){let n=e,i=gi.EQUALS;for(const e of xi){const t=n.indexOf(":"+e);-1!==t&&(i=e,n=n.substring(0,t))}for(const e of vi)t.match(new RegExp("^"+e+"\\d"))&&(i=e,t=t.substring(e.length));return{code:n,operator:i,value:t}}(t,e)))})),{resourceType:n,filters:i,fields:r,offset:a,count:s,total:c,sortRules:o}}function Si(e){const t=[];return e.fields&&t.push("_fields="+e.fields.join(",")),e.filters&&e.filters.forEach((e=>t.push(function(e){const t=xi.includes(e.operator)?":"+e.operator:"",n=vi.includes(e.operator)?e.operator:"";return`${e.code}${t}=${n}${encodeURIComponent(e.value)}`}(e)))),e.sortRules&&e.sortRules.length>0&&t.push(function(e){if(!e||0===e.length)return"";return"_sort="+e.map((e=>e.descending?"-"+e.code:e.code)).join(",")}(e.sortRules)),void 0!==e.offset&&t.push("_offset="+e.offset),void 0!==e.count&&t.push("_count="+e.count),void 0!==e.total&&t.push("_total="+e.total),0===t.length?"":(t.sort(),"?"+t.join("&"))}var Ei;function Ti(e,t){let n=je.types[e]?.searchParamsDetails?.[t.code];return n||(n=function(e,t){if("_lastUpdated"===t.code)return{columnName:"lastUpdated",type:Ei.DATETIME};const n=t.code,i=function(e){return e.split("-").reduce(((e,t,n)=>e+(n?Z(t):t)),"")}(n),o=Di(e,t.expression)?.split(".");if(!o)return{columnName:i,type:Ei.TEXT};const r=bi(t);let a,s,c=e,d=!1;for(let n=1;n<o.length;n++){const l=o[n];if(a=je.types[c]?.properties?.[l]??je.types[c]?.properties?.[l+"[x]"],!a)throw new Error(`Element definition not found for ${e} ${t.code}`);if("*"===a.max&&(d=!0),s=a.type?.[0].code,!s)return{columnName:i,type:r,array:d};n<o.length-1&&("Element"===s||"BackboneElement"===s?c+=Z(l):c=s)}const l=bi(t,s),u={columnName:i,type:l,elementDefinition:a,array:d};return function(e,t,n){const i=je.types[e];i.searchParamsDetails||(i.searchParamsDetails={});i.searchParamsDetails[t]=n}(e,n,u),u}(e,t)),n}function bi(e,t){let n=Ei.TEXT;switch(e.type){case"date":n=t===Ae.dateTime||t===Ae.instant?Ei.DATETIME:Ei.DATE;break;case"number":n=Ei.NUMBER;break;case"quantity":n=Ei.QUANTITY;break;case"reference":n=Ei.REFERENCE;break;case"token":"boolean"===t&&(n=Ei.BOOLEAN)}return n}function Di(e,t){const n=t.split(" | ");for(const t of n){if((i=t).includes(" as Period")||i.includes(" as SampledDate"))continue;const n=Ci(t);if(n.startsWith(e+"."))return n}var i}function Ci(e){let t=e.trim();t.startsWith("(")&&t.endsWith(")")&&(t=t.substring(1,t.length-1)),t.includes("[0]")&&(t=t.replaceAll("[0]",""));const n=[" != "," as ",".as(",".exists(",".where("];for(const e of n)t.includes(e)&&(t=t.substring(0,t.indexOf(e)));return t}function Pi(e,t){if(t.resourceType!==e.resourceType)return!1;if(t.filters)for(const n of t.filters)if(!Ai(e,t,n))return!1;return!0}function Ai(e,t,n){const i=je.types[t.resourceType]?.searchParams?.[n.code];switch(i?.type){case"reference":return function(e,t,n){const i=li(n.expression,e),o=Ii(t.operator);if(""===t.value&&0===i.length)return t.operator===gi.EQUALS;const r=i.map((e=>"string"==typeof e?e:e.reference));for(const e of t.value.split(",")){let n=r.includes(e);if(n||"_compartment"!==t.code||(n=r.some((t=>t?.endsWith("/"+e)))),n)return!o}return o}(e,n,i);case"string":return Ri(e,n,i);case"token":return function(e,t,n){const i=Ti(e.resourceType,n);return i.type===Ei.BOOLEAN?function(e,t,n){const i=li(n.expression,e),o="true"===t.value,r=i.includes(o);return Ii(t.operator)?!r:r}(e,t,n):Ri(e,t,n)}(e,n,i);case"date":return function(e,t,n){const i=li(n.expression,e),o=t.value.split(","),r=Ii(t.operator);for(const e of i)for(const n of o){if(Mi(e,t.operator,n))return!r}return r}(e,n,i)}return!1}function Ri(e,t,n){const i=li(n.expression,e),o=t.value.split(","),r=Ii(t.operator);for(const e of i)for(const n of o){if(ki(e,t.operator,n))return!r}return r}function ki(e,t,n){let i="";return e&&("string"==typeof e?i=e:"object"==typeof e&&(i=JSON.stringify(e))),i.toLowerCase().includes(n.toLowerCase())}function Mi(e,t,n){switch(t){case gi.STARTS_AFTER:case gi.GREATER_THAN:return e>n;case gi.GREATER_THAN_OR_EQUALS:return e>=n;case gi.ENDS_BEFORE:case gi.LESS_THAN:return e<n;case gi.LESS_THAN_OR_EQUALS:return e<=n;case gi.EQUALS:case gi.NOT_EQUALS:return e===n}return!1}function Ii(e){return e===gi.NOT_EQUALS||e===gi.NOT}!function(e){e.BOOLEAN="BOOLEAN",e.NUMBER="NUMBER",e.QUANTITY="QUANTITY",e.TEXT="TEXT",e.REFERENCE="REFERENCE",e.DATE="DATE",e.DATETIME="DATETIME",e.PERIOD="PERIOD"}(Ei||(Ei={}));const Oi="ok",Ui="created",Li="gone",Ni="not-modified",_i="not-found",ji="unauthorized",Qi="forbidden",Wi="too-many-requests",Bi={resourceType:"OperationOutcome",id:Oi,issue:[{severity:"information",code:"informational",details:{text:"All OK"}}]},$i={resourceType:"OperationOutcome",id:Ui,issue:[{severity:"information",code:"informational",details:{text:"Created"}}]},qi={resourceType:"OperationOutcome",id:Ni,issue:[{severity:"information",code:"informational",details:{text:"Not Modified"}}]},Fi={resourceType:"OperationOutcome",id:_i,issue:[{severity:"error",code:"not-found",details:{text:"Not found"}}]},Hi={resourceType:"OperationOutcome",id:ji,issue:[{severity:"error",code:"login",details:{text:"Unauthorized"}}]},zi={resourceType:"OperationOutcome",id:Qi,issue:[{severity:"error",code:"forbidden",details:{text:"Forbidden"}}]},Gi={resourceType:"OperationOutcome",id:Li,issue:[{severity:"error",code:"deleted",details:{text:"Gone"}}]},Vi={resourceType:"OperationOutcome",id:Wi,issue:[{severity:"error",code:"throttled",details:{text:"Too Many Requests"}}]};function Xi(e,t){return{resourceType:"OperationOutcome",issue:[{severity:"error",code:"invalid",details:{text:e},expression:t?[t]:void 0}]}}function Yi(e){return e.id===Oi||e.id===Ui||e.id===Ni}function Ji(e){return e.id===_i}function Zi(e){return e.id===Li}function Ki(e){return e.id===Oi?200:e.id===Ui?201:e.id===Ni?304:e.id===ji?401:e.id===Qi?403:e.id===_i?404:e.id===Li?410:e.id===Wi?429:400}function eo(e,t){if(!Yi(e)||void 0===t)throw new to(e)}class to extends Error{constructor(e){super(e?.issue?.[0].details?.text),this.outcome=e}}function no(e){if(!e)return"Unknown error";if("string"==typeof e)return e;if(e instanceof Error)return e.message;if("object"==typeof e&&"resourceType"in e){return e.issue?.[0]?.details?.text??"Unknown error"}return JSON.stringify(e)}export{Xn as AndAtom,jn as ArithemticOperatorAtom,_n as AsAtom,Qn as ConcatAtom,Wn as ContainsAtom,yi as DEFAULT_SEARCH_COUNT,$n as DotAtom,Ln as EmptySetAtom,Fn as EqualsAtom,zn as EquivalentAtom,ei as FHIRPATH_KEYWORDS,ti as FHIRPATH_OPERATORS,In as FhirPathAtom,Zn as FunctionAtom,mi as Hl7Context,fi as Hl7Field,pi as Hl7Message,hi as Hl7Segment,Bn as InAtom,Kn as IndexerAtom,Vn as IsAtom,a as LRUCache,On as LiteralAtom,xt as MEDPLUM_VERSION,vt as MedplumClient,Hn as NotEqualsAtom,Gn as NotEquivalentAtom,to as OperationOutcomeError,gi as Operator,Yn as OrAtom,Ae as PropertyType,De as ReadablePromise,Ei as SearchParameterType,Un as SymbolAtom,Nn as UnaryOperatorAtom,qn as UnionAtom,Jn as XorAtom,Bi as allOk,J as arrayBufferToBase64,Y as arrayBufferToHex,eo as assertOk,Xi as badRequest,sn as booleanToTypedValue,Le as buildTypeName,L as calculateAge,N as calculateAgeString,Z as capitalize,P as createReference,ke as createSchema,$i as created,H as deepClone,F as deepEquals,li as evalFhirPath,ui as evalFhirPathTyped,hn as fhirPathArrayEquals,yn as fhirPathArrayEquivalent,fn as fhirPathEquals,gn as fhirPathEquivalent,vn as fhirPathIs,pn as fhirPathNot,ne as findObservationInterval,ie as findObservationReferenceRange,zi as forbidden,s as formatAddress,T as formatCodeableConcept,b as formatCoding,m as formatDate,h as formatDateTime,l as formatFamilyName,d as formatGivenName,c as formatHumanName,E as formatMoney,D as formatObservationValue,f as formatPeriod,S as formatQuantity,w as formatRange,Si as formatSearchQuery,p as formatTime,v as formatTiming,ee as getCodeBySystem,U as getDateProperty,M as getDisplayString,_e as getElementDefinition,Di as getExpressionForResourceType,W as getExtensionValue,Q as getIdentifier,I as getImageSrc,Ne as getPropertyDisplayName,_ as getQuestionnaireAnswers,A as getReferenceString,Ti as getSearchParameterDetails,Ki as getStatus,ln as getTypedPropertyValue,je as globalSchema,Gi as gone,Ue as indexSearchParameter,Oe as indexSearchParameterBundle,Ie as indexStructureDefinition,Me as indexStructureDefinitionBundle,si as initFhirPathParserBuilder,q as isEmpty,Zi as isGone,K as isLowerCase,Ji as isNotFound,G as isObject,Yi as isOk,wn as isPeriod,k as isProfileResource,Sn as isQuantity,En as isQuantityEquivalent,V as isStringArray,z as isUUID,u as isValidDate,re as matchesRange,Pi as matchesSearchRequest,no as normalizeErrorString,Fi as notFound,qi as notModified,di as parseFhirPath,be as parseJWTPayload,wi as parseSearchDefinition,se as preciseEquals,de as preciseGreaterThan,ue as preciseGreaterThanOrEquals,ce as preciseLessThan,le as preciseLessThanOrEquals,ae as preciseRound,mn as removeDuplicates,R as resolveId,te as setCodeBySystem,B as stringify,dn as toJsBoolean,cn as toTypedValue,ni as tokenize,Vi as tooManyRequests,Hi as unauthorized};
