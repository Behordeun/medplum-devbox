import { Group, TextInput } from '@mantine/core';
import React, { useState, useRef } from 'react';
import { ContactPointInput } from '../ContactPointInput/ContactPointInput.mjs';

function ContactDetailInput(props) {
    const [contactPoint, setContactDetail] = useState(props.defaultValue);
    const ref = useRef();
    ref.current = contactPoint;
    function setContactDetailWrapper(newValue) {
        setContactDetail(newValue);
        if (props.onChange) {
            props.onChange(newValue);
        }
    }
    function setName(name) {
        const newValue = { ...ref.current, name };
        if (!name) {
            delete newValue.name;
        }
        setContactDetailWrapper(newValue);
    }
    function setTelecom(telecom) {
        const newValue = { ...ref.current, telecom: telecom && [telecom] };
        if (!telecom) {
            delete newValue.telecom;
        }
        setContactDetailWrapper(newValue);
    }
    return (React.createElement(Group, { spacing: "xs", grow: true, noWrap: true },
        React.createElement(TextInput, { "data-testid": props.name + '-name', name: props.name + '-name', placeholder: "Name", style: { width: 180 }, defaultValue: contactPoint?.name, onChange: (e) => setName(e.currentTarget.value) }),
        React.createElement(ContactPointInput, { name: props.name + '-telecom', defaultValue: contactPoint?.telecom?.[0], onChange: setTelecom })));
}

export { ContactDetailInput };
//# sourceMappingURL=ContactDetailInput.mjs.map
