{"version":3,"file":"MoneyInput.mjs","sources":["../../../src/MoneyInput/MoneyInput.tsx"],"sourcesContent":["import { NativeSelect, TextInput } from '@mantine/core';\nimport { Money } from '@medplum/fhirtypes';\nimport { IconCurrencyDollar } from '@tabler/icons';\nimport React, { useCallback, useState } from 'react';\n\n/*\n * Based on: https://github.com/mantinedev/ui.mantine.dev/blob/master/components/CurrencyInput/CurrencyInput.tsx\n */\n\n/**\n * List of currencies.\n *\n * Full list of currencies:\n * https://www.hl7.org/fhir/valueset-currencies.html\n *\n * Latest browsers can report list of supported currencies, but it's not widely supported:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/supportedValuesOf\n *\n * Using a short list for simplicity for now.\n */\nconst data = ['USD', 'EUR', 'CAD', 'GBP', 'AUD'];\n\nexport interface MoneyInputProps {\n  name: string;\n  label?: string;\n  placeholder?: string;\n  defaultValue?: Money;\n  onChange?: (value: Money) => void;\n}\n\nexport function MoneyInput(props: MoneyInputProps): JSX.Element {\n  const { onChange } = props;\n  const [value, setValue] = useState(props.defaultValue);\n\n  const setValueWrapper = useCallback(\n    (newValue: Money): void => {\n      setValue(newValue);\n      if (onChange) {\n        onChange(newValue);\n      }\n    },\n    [onChange]\n  );\n\n  const handleCurrencyChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      setValueWrapper({\n        ...value,\n        currency: e.currentTarget.value,\n      });\n    },\n    [value, setValueWrapper]\n  );\n\n  const handleValueChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setValueWrapper({\n        ...value,\n        value: e.currentTarget.valueAsNumber,\n      });\n    },\n    [value, setValueWrapper]\n  );\n\n  const select = (\n    <NativeSelect\n      defaultValue={value?.currency}\n      data={data}\n      styles={{\n        input: {\n          fontWeight: 500,\n          borderTopLeftRadius: 0,\n          borderBottomLeftRadius: 0,\n          width: 92,\n        },\n      }}\n      onChange={handleCurrencyChange}\n    />\n  );\n\n  return (\n    <TextInput\n      type=\"number\"\n      label={props.label}\n      placeholder={props.placeholder || 'Value'}\n      defaultValue={value?.value?.toString() || 'USD'}\n      icon={<IconCurrencyDollar size={14} />}\n      rightSection={select}\n      rightSectionWidth={92}\n      onChange={handleValueChange}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;AAKA;;AAEG;AAEH;;;;;;;;;;AAUG;AACH,MAAM,IAAI,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;AAU3C,SAAU,UAAU,CAAC,KAAsB,EAAA;AAC/C,IAAA,MAAM,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC;AAC3B,IAAA,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;AAEvD,IAAA,MAAM,eAAe,GAAG,WAAW,CACjC,CAAC,QAAe,KAAU;QACxB,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACnB,QAAA,IAAI,QAAQ,EAAE;YACZ,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACpB,SAAA;AACH,KAAC,EACD,CAAC,QAAQ,CAAC,CACX,CAAC;AAEF,IAAA,MAAM,oBAAoB,GAAG,WAAW,CACtC,CAAC,CAAuC,KAAI;AAC1C,QAAA,eAAe,CAAC;AACd,YAAA,GAAG,KAAK;AACR,YAAA,QAAQ,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK;AAChC,SAAA,CAAC,CAAC;AACL,KAAC,EACD,CAAC,KAAK,EAAE,eAAe,CAAC,CACzB,CAAC;AAEF,IAAA,MAAM,iBAAiB,GAAG,WAAW,CACnC,CAAC,CAAsC,KAAI;AACzC,QAAA,eAAe,CAAC;AACd,YAAA,GAAG,KAAK;AACR,YAAA,KAAK,EAAE,CAAC,CAAC,aAAa,CAAC,aAAa;AACrC,SAAA,CAAC,CAAC;AACL,KAAC,EACD,CAAC,KAAK,EAAE,eAAe,CAAC,CACzB,CAAC;AAEF,IAAA,MAAM,MAAM,IACV,KAAC,CAAA,aAAA,CAAA,YAAY,IACX,YAAY,EAAE,KAAK,EAAE,QAAQ,EAC7B,IAAI,EAAE,IAAI,EACV,MAAM,EAAE;AACN,YAAA,KAAK,EAAE;AACL,gBAAA,UAAU,EAAE,GAAG;AACf,gBAAA,mBAAmB,EAAE,CAAC;AACtB,gBAAA,sBAAsB,EAAE,CAAC;AACzB,gBAAA,KAAK,EAAE,EAAE;AACV,aAAA;AACF,SAAA,EACD,QAAQ,EAAE,oBAAoB,EAAA,CAC9B,CACH,CAAC;IAEF,QACE,KAAC,CAAA,aAAA,CAAA,SAAS,EACR,EAAA,IAAI,EAAC,QAAQ,EACb,KAAK,EAAE,KAAK,CAAC,KAAK,EAClB,WAAW,EAAE,KAAK,CAAC,WAAW,IAAI,OAAO,EACzC,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,KAAK,EAC/C,IAAI,EAAE,KAAC,CAAA,aAAA,CAAA,kBAAkB,EAAC,EAAA,IAAI,EAAE,EAAE,EAAI,CAAA,EACtC,YAAY,EAAE,MAAM,EACpB,iBAAiB,EAAE,EAAE,EACrB,QAAQ,EAAE,iBAAiB,EAC3B,CAAA,EACF;AACJ;;;;"}