import { TextInput } from '@mantine/core';
import { createReference } from '@medplum/core';
import React, { useState, useRef } from 'react';
import { useMedplumProfile } from '../MedplumProvider/MedplumProvider.mjs';

function AnnotationInput(props) {
    const author = useMedplumProfile();
    const [value, setValue] = useState(props.defaultValue || {});
    const valueRef = useRef();
    valueRef.current = value;
    function setText(text) {
        const newValue = text
            ? {
                text,
                authorReference: author && createReference(author),
                time: new Date().toISOString(),
            }
            : {};
        setValue(newValue);
        if (props.onChange) {
            props.onChange(newValue);
        }
    }
    return (React.createElement(TextInput, { name: props.name, placeholder: "Annotation text", defaultValue: value.text, onChange: (e) => setText(e.currentTarget.value) }));
}

export { AnnotationInput };
//# sourceMappingURL=AnnotationInput.mjs.map
