{"version":3,"file":"QuantityInput.mjs","sources":["../../../src/QuantityInput/QuantityInput.tsx"],"sourcesContent":["import { Group, NativeSelect, TextInput } from '@mantine/core';\nimport { Quantity } from '@medplum/fhirtypes';\nimport React, { useState } from 'react';\n\nexport interface QuantityInputProps {\n  name: string;\n  defaultValue?: Quantity;\n  onChange?: (value: Quantity) => void;\n}\n\nexport function QuantityInput(props: QuantityInputProps): JSX.Element {\n  const [value, setValue] = useState(props.defaultValue);\n\n  function setValueWrapper(newValue: Quantity): void {\n    setValue(newValue);\n    if (props.onChange) {\n      props.onChange(newValue);\n    }\n  }\n\n  return (\n    <Group spacing=\"xs\" grow noWrap>\n      <NativeSelect\n        style={{ width: 80 }}\n        data-testid={props.name + '-comparator'}\n        defaultValue={value?.comparator}\n        data={['', '<', '<=', '>=', '>']}\n        onChange={(e) =>\n          setValueWrapper({\n            ...value,\n            comparator: e.currentTarget.value as '<' | '<=' | '>=' | '>',\n          })\n        }\n      />\n      <TextInput\n        id={props.name}\n        name={props.name}\n        data-testid={props.name + '-value'}\n        type=\"number\"\n        step=\"any\"\n        placeholder=\"Value\"\n        defaultValue={value?.value?.toString()}\n        onChange={(e) =>\n          setValueWrapper({\n            ...value,\n            value: tryParseNumber(e.currentTarget.value),\n          })\n        }\n      />\n      <TextInput\n        placeholder=\"Unit\"\n        data-testid={props.name + '-unit'}\n        defaultValue={value?.unit}\n        onChange={(e) =>\n          setValueWrapper({\n            ...value,\n            unit: e.currentTarget.value,\n          })\n        }\n      />\n    </Group>\n  );\n}\n\nfunction tryParseNumber(str: string): number | undefined {\n  if (!str) {\n    return undefined;\n  }\n  return parseFloat(str);\n}\n"],"names":[],"mappings":";;;AAUM,SAAU,aAAa,CAAC,KAAyB,EAAA;AACrD,IAAA,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;IAEvD,SAAS,eAAe,CAAC,QAAkB,EAAA;QACzC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACnB,IAAI,KAAK,CAAC,QAAQ,EAAE;AAClB,YAAA,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC1B,SAAA;KACF;IAED,QACE,KAAC,CAAA,aAAA,CAAA,KAAK,EAAC,EAAA,OAAO,EAAC,IAAI,EAAC,IAAI,EAAA,IAAA,EAAC,MAAM,EAAA,IAAA,EAAA;QAC7B,KAAC,CAAA,aAAA,CAAA,YAAY,IACX,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAA,aAAA,EACP,KAAK,CAAC,IAAI,GAAG,aAAa,EACvC,YAAY,EAAE,KAAK,EAAE,UAAU,EAC/B,IAAI,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,EAChC,QAAQ,EAAE,CAAC,CAAC,KACV,eAAe,CAAC;AACd,gBAAA,GAAG,KAAK;AACR,gBAAA,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAgC;AAC7D,aAAA,CAAC,EAEJ,CAAA;QACF,KAAC,CAAA,aAAA,CAAA,SAAS,IACR,EAAE,EAAE,KAAK,CAAC,IAAI,EACd,IAAI,EAAE,KAAK,CAAC,IAAI,EAAA,aAAA,EACH,KAAK,CAAC,IAAI,GAAG,QAAQ,EAClC,IAAI,EAAC,QAAQ,EACb,IAAI,EAAC,KAAK,EACV,WAAW,EAAC,OAAO,EACnB,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,EACtC,QAAQ,EAAE,CAAC,CAAC,KACV,eAAe,CAAC;AACd,gBAAA,GAAG,KAAK;gBACR,KAAK,EAAE,cAAc,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC;AAC7C,aAAA,CAAC,EAEJ,CAAA;QACF,KAAC,CAAA,aAAA,CAAA,SAAS,EACR,EAAA,WAAW,EAAC,MAAM,EACL,aAAA,EAAA,KAAK,CAAC,IAAI,GAAG,OAAO,EACjC,YAAY,EAAE,KAAK,EAAE,IAAI,EACzB,QAAQ,EAAE,CAAC,CAAC,KACV,eAAe,CAAC;AACd,gBAAA,GAAG,KAAK;AACR,gBAAA,IAAI,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK;aAC5B,CAAC,EAAA,CAEJ,CACI,EACR;AACJ,CAAC;AAED,SAAS,cAAc,CAAC,GAAW,EAAA;IACjC,IAAI,CAAC,GAAG,EAAE;AACR,QAAA,OAAO,SAAS,CAAC;AAClB,KAAA;AACD,IAAA,OAAO,UAAU,CAAC,GAAG,CAAC,CAAC;AACzB;;;;"}